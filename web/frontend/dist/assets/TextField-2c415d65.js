import{t as d,I as ae,ak as mn,al as pn,N as hn,J as $,a,am as xn,e as U,j as h,a0 as In,H as Tn,an as Cn,ag as Fn,T as Pn,K as bn,ao as _n,W as D}from"./index-885978b8.js";import{L as En,h as gn,l as vn}from"./Labelled-5b2a4701.js";var kn=function(o){return d.createElement("svg",Object.assign({viewBox:"0 0 20 20"},o),d.createElement("path",{fillRule:"evenodd",d:"M10 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm-2.293 4.293a1 1 0 0 0-1.414 1.414l2.293 2.293-2.293 2.293a1 1 0 1 0 1.414 1.414l2.293-2.293 2.293 2.293a1 1 0 1 0 1.414-1.414l-2.293-2.293 2.293-2.293a1 1 0 0 0-1.414-1.414l-2.293 2.293-2.293-2.293z"}))},n={TextField:"Polaris-TextField",ClearButton:"Polaris-TextField__ClearButton",multiline:"Polaris-TextField--multiline",Input:"Polaris-TextField__Input",hasValue:"Polaris-TextField--hasValue",focus:"Polaris-TextField--focus",VerticalContent:"Polaris-TextField__VerticalContent",Backdrop:"Polaris-TextField__Backdrop",error:"Polaris-TextField--error",readOnly:"Polaris-TextField--readOnly",disabled:"Polaris-TextField--disabled",Prefix:"Polaris-TextField__Prefix",suggestion:"Polaris-TextField--suggestion",borderless:"Polaris-TextField--borderless","Input-hasClearButton":"Polaris-TextField__Input--hasClearButton","Input-suffixed":"Polaris-TextField__Input--suffixed","Input-alignRight":"Polaris-TextField__Input--alignRight","Input-alignLeft":"Polaris-TextField__Input--alignLeft","Input-alignCenter":"Polaris-TextField__Input--alignCenter",Suffix:"Polaris-TextField__Suffix",CharacterCount:"Polaris-TextField__CharacterCount",AlignFieldBottom:"Polaris-TextField__AlignFieldBottom",Spinner:"Polaris-TextField__Spinner",SpinnerIcon:"Polaris-TextField__SpinnerIcon",Resizer:"Polaris-TextField__Resizer",DummyInput:"Polaris-TextField__DummyInput",Segment:"Polaris-TextField__Segment",monospaced:"Polaris-TextField--monospaced"};const Rn=d.forwardRef(function({onChange:o,onClick:l,onMouseDown:x,onMouseUp:c,onBlur:I},P){function C(T){return()=>o(T)}function v(T){return g=>{g.button===0&&x(T)}}return d.createElement("div",{className:n.Spinner,onClick:l,"aria-hidden":!0,ref:P},d.createElement("div",{role:"button",className:n.Segment,tabIndex:-1,onClick:C(1),onMouseDown:v(C(1)),onMouseUp:c,onBlur:I},d.createElement("div",{className:n.SpinnerIcon},d.createElement(ae,{source:mn}))),d.createElement("div",{role:"button",className:n.Segment,tabIndex:-1,onClick:C(-1),onMouseDown:v(C(-1)),onMouseUp:c,onBlur:I},d.createElement("div",{className:n.SpinnerIcon},d.createElement(ae,{source:pn}))))});var V={Connected:"Polaris-Connected",Item:"Polaris-Connected__Item","Item-primary":"Polaris-Connected__Item--primary","Item-focused":"Polaris-Connected__Item--focused"};function ie({children:t,position:o}){const{value:l,setTrue:x,setFalse:c}=hn(!1),I=$(V.Item,l&&V["Item-focused"],o==="primary"?V["Item-primary"]:V["Item-connection"]);return d.createElement("div",{onBlur:c,onFocus:x,className:I},t)}function Mn({children:t,left:o,right:l}){const x=o?d.createElement(ie,{position:"left"},o):null,c=l?d.createElement(ie,{position:"right"},l):null;return d.createElement("div",{className:V.Connected},x,d.createElement(ie,{position:"primary"},t),c)}function Nn({contents:t,currentHeight:o=null,minimumLines:l,onHeightChange:x}){const c=a.useRef(null),I=a.useRef(null),P=a.useRef(),C=a.useRef(o);o!==C.current&&(C.current=o),a.useEffect(()=>()=>{P.current&&cancelAnimationFrame(P.current)},[]);const v=l?h("div",{ref:I,className:n.DummyInput,dangerouslySetInnerHTML:{__html:Bn(l)}}):null,T=a.useCallback(()=>{P.current&&cancelAnimationFrame(P.current),P.current=requestAnimationFrame(()=>{if(!c.current||!I.current)return;const g=Math.max(c.current.offsetHeight,I.current.offsetHeight);g!==C.current&&x(g)})},[x]);return xn(()=>{T()}),U("div",{"aria-hidden":!0,className:n.Resizer,children:[h(In,{event:"resize",handler:T}),h("div",{ref:c,className:n.DummyInput,dangerouslySetInnerHTML:{__html:wn(t)}}),v]})}const ge={"&":"&amp;","<":"&lt;",">":"&gt;","\n":"<br>","\r":""},Sn=new RegExp(`[${Object.keys(ge).join()}]`,"g");function yn(t){return ge[t]}function Bn(t){let o="";for(let l=0;l<t;l++)o+="<br>";return o}function wn(t){return t?`${t.replace(Sn,yn)}<br>`:"<br>"}function Ln({prefix:t,suffix:o,verticalContent:l,placeholder:x,value:c="",helpText:I,label:P,labelAction:C,labelHidden:v,disabled:T,clearButton:g,readOnly:W,autoFocus:ve,focused:z,multiline:p,error:H,connectedRight:oe,connectedLeft:le,type:f="text",name:ke,id:Re,role:Me,step:L,largeStep:A,autoComplete:Ne,max:k,maxLength:N,maxHeight:Se,min:R,minLength:ye,pattern:Be,inputMode:we,spellCheck:De,ariaOwns:$e,ariaControls:Ve,ariaExpanded:ze,ariaActiveDescendant:He,ariaAutocomplete:Le,showCharacterCount:se,align:ce,requiredIndicator:ue,monospaced:Ae,selectTextOnFocus:je,suggestion:b,onClearButtonClick:de,onChange:F,onSpinnerChange:E,onFocus:fe,onBlur:me,borderless:Oe}){const q=Tn(),[G,Ke]=a.useState(null),[S,J]=a.useState(!!z),Ue=Cn(),r=Fn("TextField",Re),m=a.useRef(null),X=a.useRef(null),Q=a.useRef(null),Y=a.useRef(null),j=a.useRef(null),Z=a.useRef(),ee=a.useRef(null);a.useEffect(()=>{const e=p?X.current:m.current;!e||z===void 0||(z?e.focus():e.blur())},[z,l,p]),a.useEffect(()=>{const e=m.current;!e||!(f==="text"||f==="tel"||f==="search"||f==="url"||f==="password")||!b||e.setSelectionRange(c.length,b.length)},[S,c,f,b]);const y=b||c,pe=L??1,he=k??1/0,xe=R??-1/0,We=$(n.TextField,!!y&&n.hasValue,T&&n.disabled,W&&n.readOnly,H&&n.error,p&&n.multiline,S&&n.focus,Oe&&n.borderless),qe=f==="currency"?"text":f,O=f==="number"||f==="integer",Ge=t?h("div",{className:n.Prefix,id:`${r}-Prefix`,ref:Q,children:t}):null,Je=o?h("div",{className:n.Suffix,id:`${r}-Suffix`,ref:Y,children:o}):null;let Ie=null;if(se){const e=y.length,i=N?q.translate("Polaris.TextField.characterCountWithMaxLength",{count:e,limit:N}):q.translate("Polaris.TextField.characterCount",{count:e}),u=$(n.CharacterCount,p&&n.AlignFieldBottom),s=N?`${e}/${N}`:e;Ie=h("div",{id:`${r}-CharacterCounter`,className:u,"aria-label":i,"aria-live":S?"polite":"off","aria-atomic":"true",onClick:K,children:s})}const Xe=g&&y!==""?U("button",{type:"button",className:n.ClearButton,onClick:cn,disabled:T,children:[h(Pn,{as:"span",visuallyHidden:!0,children:q.translate("Polaris.Common.clear")}),h(ae,{source:kn,color:"base"})]}):null,ne=a.useCallback((e,i=pe)=>{if(F==null&&E==null)return;const u=fn=>(fn.toString().split(".")[1]||[]).length,s=c?parseFloat(c):0;if(isNaN(s))return;const _=f==="integer"?0:Math.max(u(s),u(i)),M=Math.min(Number(he),Math.max(s+e*i,Number(xe)));E!=null?E(String(M.toFixed(_)),r):F!=null&&F(String(M.toFixed(_)),r)},[r,he,xe,F,E,pe,f,c]),te=a.useCallback(()=>{clearTimeout(Z.current)},[]),Qe=a.useCallback(e=>{let s=200;const _=()=>{s>50&&(s-=10),e(0),Z.current=window.setTimeout(_,s)};Z.current=window.setTimeout(_,s),document.addEventListener("mouseup",te,{once:!0})},[te]),Ye=O&&L!==0&&!T&&!W?h(Rn,{onClick:K,onChange:ne,onMouseDown:Qe,onMouseUp:te,ref:ee,onBlur:Pe}):null,Ze=p&&G?{height:G,maxHeight:Se}:null,en=a.useCallback(e=>{Ke(e)},[]),nn=p&&Ue?h(Nn,{contents:y||x,currentHeight:G,minimumLines:typeof p=="number"?p:1,onHeightChange:en}):null,B=[];H&&B.push(`${r}Error`),I&&B.push(gn(r)),se&&B.push(`${r}-CharacterCounter`);const w=[];t&&w.push(`${r}-Prefix`),o&&w.push(`${r}-Suffix`),l&&w.push(`${r}-VerticalContent`),w.unshift(vn(r));const tn=$(n.Input,ce&&n[bn("Input-align",ce)],o&&n["Input-suffixed"],g&&n["Input-hasClearButton"],Ae&&n.monospaced,b&&n.suggestion),Te=e=>{if(J(!0),je&&!b){const i=p?X.current:m.current;i==null||i.select()}fe&&fe(e)};_n("wheel",rn,m);function rn(e){document.activeElement===e.target&&O&&e.stopPropagation()}const Ce=a.createElement(p?"textarea":"input",{name:ke,id:r,disabled:T,readOnly:W,role:Me,autoFocus:ve,value:y,placeholder:x,style:Ze,autoComplete:Ne,className:tn,ref:p?X:m,min:R,max:k,step:L,minLength:ye,maxLength:N,spellCheck:De,pattern:Be,inputMode:we,type:qe,rows:Dn(p),"aria-describedby":B.length?B.join(" "):void 0,"aria-labelledby":w.join(" "),"aria-invalid":!!H,"aria-owns":$e,"aria-activedescendant":He,"aria-autocomplete":Le,"aria-controls":Ve,"aria-expanded":ze,"aria-required":ue,...$n(p),onFocus:Te,onBlur:Pe,onClick:K,onKeyPress:un,onKeyDown:dn,onChange:b?void 0:Fe,onInput:b?Fe:void 0}),an=l?U("div",{className:n.VerticalContent,id:`${r}-VerticalContent`,ref:j,onClick:K,children:[l,Ce]}):null,on=l?an:Ce,ln=h("div",{className:$(n.Backdrop,le&&n["Backdrop-connectedLeft"],oe&&n["Backdrop-connectedRight"])});return h(En,{label:P,id:r,error:H,action:C,labelHidden:v,helpText:I,requiredIndicator:ue,children:h(Mn,{left:le,right:oe,children:U("div",{className:We,onClick:sn,children:[Ge,on,Je,Ie,Xe,Ye,ln,nn]})})});function Fe(e){F&&F(e.currentTarget.value,r)}function sn(e){var i,u;const{target:s}=e,_=m==null||(i=m.current)===null||i===void 0?void 0:i.getAttribute("role");if(s===m.current&&_==="combobox"){var M;(M=m.current)===null||M===void 0||M.focus(),Te(e);return}be(s)||Ee(s)||re(s)||_e(s)||S||(u=m.current)===null||u===void 0||u.focus()}function K(e){!_e(e.target)&&!re(e.target)&&e.stopPropagation(),!(be(e.target)||Ee(e.target)||re(e.target)||S)&&J(!0)}function cn(){de&&de(r)}function un(e){const{key:i,which:u}=e,s=/[\d.,eE+-]$/,_=/[\deE+-]$/;!O||u===D.Enter||f==="number"&&s.test(i)||f==="integer"&&_.test(i)||e.preventDefault()}function dn(e){if(!O)return;const{key:i,which:u}=e;(u===D.Home||i==="Home")&&R!==void 0&&(E!=null?E(String(R),r):F!=null&&F(String(R),r)),(u===D.End||i==="End")&&k!==void 0&&(E!=null?E(String(k),r):F!=null&&F(String(k),r)),(u===D.PageUp||i==="PageUp")&&A!==void 0&&ne(1,A),(u===D.PageDown||i==="PageDown")&&A!==void 0&&ne(-1,A)}function Pe(e){J(!1),me&&me(e)}function re(e){return e instanceof HTMLElement&&m.current&&(m.current.contains(e)||m.current.contains(document.activeElement))}function be(e){return e instanceof Element&&(Q.current&&Q.current.contains(e)||Y.current&&Y.current.contains(e))}function _e(e){return e instanceof Element&&ee.current&&ee.current.contains(e)}function Ee(e){return e instanceof Element&&j.current&&(j.current.contains(e)||j.current.contains(document.activeElement))}}function Dn(t){if(t)return typeof t=="number"?t:1}function $n(t){if(t)return t||typeof t=="number"&&t>0?{"aria-multiline":!0}:void 0}export{Ln as T};
