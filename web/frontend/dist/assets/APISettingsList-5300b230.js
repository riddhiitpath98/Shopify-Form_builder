import{a as i,_ as Y,u as O,b9 as B,b as h,d as D,bx as z,e as d,j as o,O as P,G as y,P as G,F,p as U,k as V,by as W}from"./index-02b1340d.js";import{h as $}from"./moment-fbc5633a.js";import{u as q,I as s}from"./IndexTable-6b600d9f.js";import{E as H}from"./SelectAllActions-b000b260.js";import"./set-root-property-5afc98ee.js";import"./Checkbox-a846ffbb.js";import"./InlineError-dd1cf19e.js";import"./TickSmallMinor.svg-6f2d4179.js";const J=i.lazy(()=>Y(()=>import("./index-d5a6afb9.js"),["assets/index-d5a6afb9.js","assets/index-02b1340d.js","assets/index-ac84de1a.css"]));function ne(){var C,g;const c=O(),p=B(),[I,a]=i.useState(!1),[v,x]=i.useState(null),r=h(e=>{var l;return(l=e==null?void 0:e.shopId)==null?void 0:l.shopId}),t=h(e=>{var l;return(l=e==null?void 0:e.anyAPISetting)==null?void 0:l.allApiSettingData}),u=h(e=>{var l,n;return(n=(l=e==null?void 0:e.inputField)==null?void 0:l.finalFormData)==null?void 0:n.formData}),L={singular:"apiList",plural:"apiLists"},{selectedResources:f,allResourcesSelected:N,handleSelectionChange:R}=q(t==null?void 0:t.data);i.useEffect(()=>{c(D(r)),c(z(r))},[c,r]);function b(e){var n;const l=u==null?void 0:u.find(m=>m._id===e);return l?(n=l==null?void 0:l.customForm[0])==null?void 0:n.formTitle:"Form not found"}const k=()=>{p("/add-api")},S=e=>{x(e),a(!0)},w=i.useCallback(()=>{a(!1)},[]),E=()=>{c(W({deleteLogArr:v,shopId:r})),a(!1)},M=(t==null?void 0:t.data)&&((C=t==null?void 0:t.data)==null?void 0:C.map(({_id:e,apiTitle:l,apiUrl:n,createdAt:m,form:_},j)=>d(s.Row,{id:e,selected:f.includes(e),position:j,children:[o(s.Cell,{children:b(_)}),o(s.Cell,{children:l}),o(s.Cell,{children:n}),o(s.Cell,{children:$(m).format("YYYY-MM-DD")}),o(s.Cell,{children:d("div",{style:{display:"flex",justifyContent:"center"},children:[o("div",{style:{marginRight:"12px"},children:o(P,{plain:!0,icon:y.edit,onClick:()=>p(`/edit-api/${e}`)})}),o("div",{children:o(P,{plain:!0,icon:y.delete,onClick:()=>S(e)})})]})})]},e))),A=!r||(t==null?void 0:t.loading),T=o(F,{children:A?null:o(H,{title:"No APIs found",withIllustration:!0})});return d(G,{fullWidth:!0,title:"Contact Form with API List",primaryAction:{content:"Add New API",onAction:()=>k()},children:[d(F,{children:[o(U,{children:o(s,{resourceName:L,loading:A,itemCount:((g=t==null?void 0:t.data)==null?void 0:g.length)||0,emptyState:T,selectedItemsCount:N?"All":f.length,onSelectionChange:R,selectable:!1,headings:[{title:"Form Name"},{title:"API Name"},{title:"API URL"},{title:"Created Date"},{title:"Action",alignment:"center"}],children:M})}),o(V,{})]}),I&&o(J,{active:I,handleClose:w,handleDelete:E,title:"Are you sure to delete selected API data?",description:"<p><strong>Note:</strong> Deleting this API will also remove the logs created for this API</p>"})]})}export{ne as default};
