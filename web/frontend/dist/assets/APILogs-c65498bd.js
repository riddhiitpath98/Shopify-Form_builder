import{a,_ as w,u as B,b as t,d as O,bF as U,e as f,j as l,W,P as q,F as m,q as z,U as J}from"./index-cdbbdef1.js";import{h as V}from"./moment-fbc5633a.js";import{u as G,I as c}from"./IndexTable-220c9c54.js";import{E as H}from"./SelectAllActions-c4a9dcba.js";import"./set-root-property-5afc98ee.js";import"./Checkbox-a1799219.js";import"./InlineError-fe270c03.js";import"./TickSmallMinor.svg-3b3bc779.js";const K=a.lazy(()=>w(()=>import("./ModalLogs-c15fd9d2.js"),["assets/ModalLogs-c15fd9d2.js","assets/index-cdbbdef1.js","assets/index-ac84de1a.css","assets/ExceptionList-9d613a38.js","assets/moment-fbc5633a.js","assets/IndexTable-220c9c54.js","assets/set-root-property-5afc98ee.js","assets/Checkbox-a1799219.js","assets/InlineError-fe270c03.js","assets/TickSmallMinor.svg-3b3bc779.js","assets/SelectAllActions-c4a9dcba.js"])),ln=()=>{var N,A;const i=B(),[g,I]=a.useState(!1),[P,y]=a.useState({}),d=t(n=>{var o;return(o=n==null?void 0:n.shopId)==null?void 0:o.shopId}),F=t(n=>{var o,r;return(r=(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiLogsData)==null?void 0:r.data}),M=t(n=>{var o,r;return(r=(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiLogsData)==null?void 0:r.total_count}),v=10,[s,x]=a.useState(1),e=t(n=>{var o;return(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiLogsData}),u=t(n=>{var o,r;return(r=(o=n==null?void 0:n.inputField)==null?void 0:o.finalFormData)==null?void 0:r.formData}),h=t(n=>{var o;return(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiSettingData}),E={singular:"log",plural:"logs"},{selectedResources:S,allResourcesSelected:L,handleSelectionChange:T}=G(e==null?void 0:e.data);a.useEffect(()=>{i(O(d))},[i,d]),a.useEffect(()=>{i(U({shopId:d,page:s,per_page:v}))},[i,s,d]);function _(n){var r;const o=u==null?void 0:u.find(p=>p._id===n);return o?(r=o==null?void 0:o.customForm[0])==null?void 0:r.formTitle:"Form not found"}function C(n){var r;const o=(r=h==null?void 0:h.data)==null?void 0:r.find(p=>p._id===n);return o?o==null?void 0:o.apiTitle:"API Title not found"}const b=n=>{y(n),I(!0)},R=a.useCallback(()=>{I(!1),y({})},[]),D=async()=>{x(s+1)},k=!d||(e==null?void 0:e.loading),Y=l(m,{children:k?null:l(H,{title:"No logs found",description:"Try changing the filters or search term",withIllustration:!0})}),j=(e==null?void 0:e.data)&&((N=e==null?void 0:e.data)==null?void 0:N.map((n,o)=>f(c.Row,{id:n==null?void 0:n._id,selected:S.includes(n==null?void 0:n._id),onClick:()=>b(n),position:o,children:[l(c.Cell,{children:l("a",{className:"Polaris-Link Polaris-Link--monochrome Polaris-Link--removeUnderline",href:"#","data-primary-link":!0,"data-polaris-unstyled":!0,children:l(W,{variation:"strong",children:_(n==null?void 0:n.formId)})})}),l(c.Cell,{children:C(n==null?void 0:n.apiId)}),l(c.Cell,{className:"ips-custom-cell",children:JSON.stringify(n==null?void 0:n.log)}),l(c.Cell,{children:V(n==null?void 0:n.createdAt).format("YYYY-MM-DD")})]},n==null?void 0:n._id)));return f(q,{fullWidth:!0,title:"Logs",children:[l(m,{children:f(z,{children:[l(c,{resourceName:E,loading:k,itemCount:((A=e==null?void 0:e.data)==null?void 0:A.length)||0,emptyState:Y,selectedItemsCount:L?"All":S.length,onSelectionChange:T,selectable:!1,headings:[{title:"Form Name"},{title:"API Name"},{title:"Log"},{title:"Created Date"}],children:j}),F.length<M?l("div",{className:"ips-pagination_button",children:l(J,{primary:!0,onClick:D,children:"Load More"})}):null]})}),g&&l(K,{item:P&&P,open:g,formData:u,handleClose:R,findAPINameById:C,findFormNameById:_})]})};export{ln as default};
