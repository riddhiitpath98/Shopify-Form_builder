import{O as M,v as g,a,a$ as H,e as P,j as i,b0 as D,U as z,J as j,aQ as V,T as F,aw as x,aR as E,N as O,av as W,b1 as L,a3 as $,$ as U,b2 as X,b3 as J,b4 as Q,X as q,W as _,V as K,b5 as Y}from"./index-cdbbdef1.js";import{C as Z}from"./Checkbox-a1799219.js";function tt(n,t,e){return n<t?t:n>e?e:n}var v={Group:"Polaris-BulkActions__Group","Group-not-sticky":"Polaris-BulkActions--groupNotSticky","Group-entering":"Polaris-BulkActions__Group--entering","Group-exiting":"Polaris-BulkActions__Group--exiting","Group-entered":"Polaris-BulkActions__Group--entered","Group-exited":"Polaris-BulkActions__Group--exited","Group-measuring":"Polaris-BulkActions__Group--measuring",ButtonGroupWrapper:"Polaris-BulkActions__ButtonGroupWrapper",BulkActionButton:"Polaris-BulkActions__BulkActionButton",disabled:"Polaris-BulkActions--disabled"},w={Indicator:"Polaris-Indicator",pulseIndicator:"Polaris-Indicator--pulseIndicator"};function et({pulse:n=!0}){const t=M(w.Indicator,n&&w.pulseIndicator);return g.createElement("span",{className:t})}function I({handleMeasurement:n,url:t,external:e,onAction:o,content:s,disclosure:c,accessibilityLabel:r,disabled:l,indicator:p,showContentInButton:f}){const h=a.useRef(null);H(()=>{if(n&&h.current){const k=h.current.getBoundingClientRect().width;n(k)}});const u=c&&!f,N=i(z,{external:e,url:t,accessibilityLabel:u?s:r,disclosure:c&&f,onClick:o,disabled:l,size:"slim",icon:u?i(j,{source:V,color:"base"}):void 0,children:u?void 0:s});return P("div",{className:v.BulkActionButton,ref:h,children:[u?i(D,{content:s,preferredPosition:"above",children:N}):N,p&&i(et,{})]})}function nt({title:n,actions:t,isNewBadgeInBadgeActions:e}){const{value:o,toggle:s}=F(!1);return g.createElement(g.Fragment,null,g.createElement(x,{active:o,activator:g.createElement(I,{disclosure:!0,showContentInButton:!0,onAction:s,content:n,indicator:e}),onClose:s,preferInputActivator:!0},g.createElement(E,{items:t,onActionAnyItem:s})))}const ot=2,st=64;class it extends a.PureComponent{constructor(...t){super(...t),this.state={popoverVisible:!1,containerWidth:0,measuring:!0},this.containerNode=null,this.buttonsNode=null,this.moreActionsNode=null,this.groupNode=a.createRef(),this.promotedActionsWidths=[],this.bulkActionsWidth=0,this.addedMoreActionsWidthForMeasuring=0,this.handleResize=W(()=>{const{popoverVisible:e}=this.state;if(this.containerNode){const o=this.containerNode.getBoundingClientRect().width;o>0&&this.setState({containerWidth:o})}e&&this.setState({popoverVisible:!1})},50,{trailing:!0}),this.setButtonsNode=e=>{this.buttonsNode=e},this.setContainerNode=e=>{this.containerNode=e},this.setMoreActionsNode=e=>{this.moreActionsNode=e},this.togglePopover=()=>{this.props.onMoreActionPopoverToggle&&this.props.onMoreActionPopoverToggle(this.state.popoverVisible),this.setState(({popoverVisible:e})=>({popoverVisible:!e}))},this.handleMeasurement=e=>{const{measuring:o}=this.state;o&&this.promotedActionsWidths.push(e)}}numberOfPromotedActionsToRender(){const{promotedActions:t}=this.props,{containerWidth:e,measuring:o}=this.state;if(!t)return 0;const s=Math.max(0,e-st);if(s>=this.bulkActionsWidth||o)return t.length;let c=!1,r=t.length-1,l=0;for(;!c&&r>=0;){l+=this.promotedActionsWidths[r];const p=this.bulkActionsWidth-l+this.addedMoreActionsWidthForMeasuring;s>=p?c=!0:r--}return tt(r,0,t.length)}actionSections(){const{actions:t}=this.props;if(!(!t||t.length===0)){if(rt(t))return t;if(ct(t))return[{items:t}]}}rolledInPromotedActions(){const{promotedActions:t}=this.props,e=this.numberOfPromotedActionsToRender();return!t||t.length===0||e>=t.length?[]:t.map(s=>R(s)?{items:[...s.actions]}:{items:[s]}).slice(e)}componentDidMount(){const{actions:t,promotedActions:e}=this.props;e&&!t&&this.moreActionsNode&&(this.addedMoreActionsWidthForMeasuring=this.moreActionsNode.getBoundingClientRect().width),this.bulkActionsWidth=this.buttonsNode?this.buttonsNode.getBoundingClientRect().width-this.addedMoreActionsWidthForMeasuring:0,this.containerNode&&this.setState({containerWidth:this.containerNode.getBoundingClientRect().width,measuring:!1})}render(){const{selectMode:t,disabled:e,promotedActions:o,i18n:s,isSticky:c,width:r}=this.props,l=this.actionSections();o&&o.length>ot;const{popoverVisible:p,measuring:f}=this.state,h=this.numberOfPromotedActionsToRender(),u=o&&h>0?[...o].slice(0,h).map((B,S)=>R(B)?i(nt,{...Object.assign({key:S},B,{isNewBadgeInBadgeActions:this.isNewBadgeInBadgeActions()})}):i(I,{...Object.assign({key:S,disabled:e},B,{handleMeasurement:this.handleMeasurement})})):null,m=this.rolledInPromotedActions(),N=!o||o&&h===0&&!f?s.translate("Polaris.ResourceList.BulkActions.actionsActivatorLabel"):s.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel");let k=[];l&&m.length>0?k=[...m,...l]:l?k=l:m.length>0&&(k=[...m]);const b=l||m.length>0||f?i("div",{className:v.Popover,ref:this.setMoreActionsNode,children:i(x,{active:p,activator:i(I,{disclosure:!0,showContentInButton:!u,onAction:this.togglePopover,content:N,disabled:e,indicator:this.isNewBadgeInBadgeActions()}),preferredAlignment:"right",onClose:this.togglePopover,children:i(E,{sections:k,onActionAnyItem:this.togglePopover})})}):null,d=u||b?P(U,{gap:"3",children:[u,b]}):null;if(!d)return null;const A=i(L,{timeout:100,in:t,nodeRef:this.groupNode,children:B=>{const S=M(v.Group,!c&&v["Group-not-sticky"],!f&&c&&v[`Group-${B}`],f&&v["Group-measuring"]);return P("div",{className:S,ref:this.groupNode,style:{width:r},children:[i($,{event:"resize",handler:this.handleResize}),i("div",{className:v.ButtonGroupWrapper,ref:this.setButtonsNode,children:i("div",{className:v.ButtonGroupInner,children:d})})]})}},"group");return i("div",{ref:this.setContainerNode,children:A})}isNewBadgeInBadgeActions(){const t=this.actionSections();if(!t)return!1;for(const o of t)for(const s of o.items){var e;if(((e=s.badge)===null||e===void 0?void 0:e.status)==="new")return!0}return!1}}function rt(n){const t=n.filter(e=>e.items);return n.length===t.length}function ct(n){const t=n.filter(e=>!e.items);return n.length===t.length}function R(n){return"title"in n}function kt(n){const t=O();return i(it,{...Object.assign({},n,{i18n:t})})}function lt(){const n=a.useContext(X);if(!n)throw new J("No StickyManager was provided.");return n}class at extends a.Component{constructor(...t){super(...t),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=e=>{this.placeHolderNode=e},this.setStickyNode=e=>{this.stickyNode=e},this.handlePositioning=(e,o=0,s=0,c=0)=>{const{isSticky:r}=this.state;(e&&!r||!e&&r)&&(this.adjustPlaceHolderNode(e),this.setState({isSticky:!r},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!r),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const l=e?{position:"fixed",top:o,left:s,width:c}:{};this.setState({style:l})},this.adjustPlaceHolderNode=e=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=e?`${Q(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:t,offset:e=!1,disableWhenStacked:o=!1,stickyManager:s}=this.props;!this.stickyNode||!this.placeHolderNode||s.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:e,boundingElement:t,disableWhenStacked:o})}componentWillUnmount(){const{stickyManager:t}=this.props;this.stickyNode&&t.unregisterStickyItem(this.stickyNode)}render(){const{style:t,isSticky:e}=this.state,{children:o}=this.props,s=ut(o)?o(e):o;return P("div",{children:[i("div",{ref:this.setPlaceHolderNode}),i("div",{ref:this.setStickyNode,style:t,children:s})]})}}function ut(n){return typeof n=="function"}function bt(n){const t=lt();return i(at,{...Object.assign({},n,{stickyManager:t})})}var dt="data:image/svg+xml,%3csvg width='60' height='60' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",ht=dt;function vt({title:n,description:t,withIllustration:e}){const s=O().translate("Polaris.EmptySearchResult.altText"),c=t?g.createElement("p",null,t):null,r=e?g.createElement(K,{alt:s,source:ht,draggable:!1}):null;return g.createElement(q,{alignment:"center",vertical:!0},r,g.createElement(_,{variant:"headingLg",as:"p"},n),g.createElement(_,{color:"subdued",as:"span"},c))}const pt=250,ft=92;function Nt(n){const t=typeof window<"u"&&!!window.IntersectionObserver,[e,o]=a.useState(!1),[s,c]=a.useState(0),[r,l]=a.useState(0),[p,f]=a.useState(0),h=a.useRef(null),u=a.useRef(null),m=d=>{d.forEach(A=>{o(!A.isIntersecting)})},N={root:null,rootMargin:"-12px",threshold:0},k=a.useRef(t?new IntersectionObserver(m,N):null),b=a.useCallback(()=>{const d=u.current;if(!d)return{maxWidth:0,offsetHeight:0,offsetLeft:0};const A=d.getBoundingClientRect(),B=n?ft:0,S=A.height-B,T=A.width,G=A.left;c(S),l(T),f(G)},[n]);return a.useEffect(()=>{b();const d=W(b,pt,{trailing:!0});return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[b]),a.useEffect(()=>{const d=k.current;if(!d)return;const A=h.current;return A&&d.observe(A),()=>{d==null||d.disconnect()}},[h]),{bulkActionsIntersectionRef:h,tableMeasurerRef:u,isBulkActionsSticky:e,bulkActionsAbsoluteOffset:s,bulkActionsMaxWidth:r,bulkActionsOffsetLeft:p,computeTableDimensions:b}}var y={SelectAllActions:"Polaris-SelectAllActions","SelectAllActions-entering":"Polaris-SelectAllActions__SelectAllActions--entering","SelectAllActions-exiting":"Polaris-SelectAllActions__SelectAllActions--exiting","SelectAllActions-entered":"Polaris-SelectAllActions__SelectAllActions--entered","SelectAllActions-exited":"Polaris-SelectAllActions__SelectAllActions--exited",PaginatedSelectAll:"Polaris-SelectAllActions__PaginatedSelectAll",AllAction:"Polaris-SelectAllActions__AllAction"},C={CheckableButton:"Polaris-CheckableButton",Checkbox:"Polaris-CheckableButton__Checkbox",Label:"Polaris-CheckableButton__Label"};const At=a.forwardRef(function({accessibilityLabel:t,label:e="",onToggleAll:o,selected:s,disabled:c,ariaLive:r},l){const p=a.useRef(null);function f(){var u;p==null||(u=p.current)===null||u===void 0||u.focus()}a.useImperativeHandle(l,()=>({focus:f}));const h=M(C.CheckableButton);return P("div",{className:h,onClick:o,children:[i("div",{className:C.Checkbox,children:i(Z,{label:t,labelHidden:!0,checked:s,disabled:c,onChange:o,ref:p})}),i("span",{className:C.Label,"aria-live":r,children:e})]})}),Bt=a.forwardRef(function({accessibilityLabel:t,label:e,selected:o,selectMode:s,paginatedSelectAllText:c,paginatedSelectAllAction:r,disabled:l,onToggleAll:p},f){const h=r?i(Y,{className:y.AllAction,onClick:r.onAction,size:"slim",disabled:l,children:r.content}):null,u=c&&r,m=h?i("div",{className:y.PaginatedSelectAll,children:h}):null,k={accessibilityLabel:t,label:u?c:e,selected:o,onToggleAll:p,disabled:l,ariaLive:u?"polite":void 0,ref:f};return i(L,{timeout:0,in:s,children:d=>{const A=M(y.SelectAllActions,y[`SelectAllActions-${d}`]);return P("div",{className:A,children:[i(At,{...k}),m]})}},"markup")});export{kt as B,At as C,vt as E,Bt as S,bt as a,Nt as u};
