import{R as d,K as ae,ao as mn,ap as pn,U as hn,Q as D,b as a,aq as xn,i as K,j as h,a4 as In,O as Tn,ar as Cn,ak as bn,X as Fn,T as Pn,as as _n,$}from"./index-a7d8285a.js";import{L as En,h as vn,l as gn}from"./Labelled-b978b66a.js";var kn=function(o){return d.createElement("svg",Object.assign({viewBox:"0 0 20 20"},o),d.createElement("path",{fillRule:"evenodd",d:"M10 2a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm-2.293 4.293a1 1 0 0 0-1.414 1.414l2.293 2.293-2.293 2.293a1 1 0 1 0 1.414 1.414l2.293-2.293 2.293 2.293a1 1 0 1 0 1.414-1.414l-2.293-2.293 2.293-2.293a1 1 0 0 0-1.414-1.414l-2.293 2.293-2.293-2.293z"}))},n={TextField:"Polaris-TextField",ClearButton:"Polaris-TextField__ClearButton",multiline:"Polaris-TextField--multiline",Input:"Polaris-TextField__Input",hasValue:"Polaris-TextField--hasValue",focus:"Polaris-TextField--focus",VerticalContent:"Polaris-TextField__VerticalContent",Backdrop:"Polaris-TextField__Backdrop",error:"Polaris-TextField--error",readOnly:"Polaris-TextField--readOnly",disabled:"Polaris-TextField--disabled",Prefix:"Polaris-TextField__Prefix",suggestion:"Polaris-TextField--suggestion",borderless:"Polaris-TextField--borderless","Input-hasClearButton":"Polaris-TextField__Input--hasClearButton","Input-suffixed":"Polaris-TextField__Input--suffixed","Input-alignRight":"Polaris-TextField__Input--alignRight","Input-alignLeft":"Polaris-TextField__Input--alignLeft","Input-alignCenter":"Polaris-TextField__Input--alignCenter",Suffix:"Polaris-TextField__Suffix",CharacterCount:"Polaris-TextField__CharacterCount",AlignFieldBottom:"Polaris-TextField__AlignFieldBottom",Spinner:"Polaris-TextField__Spinner",SpinnerIcon:"Polaris-TextField__SpinnerIcon",Resizer:"Polaris-TextField__Resizer",DummyInput:"Polaris-TextField__DummyInput",Segment:"Polaris-TextField__Segment",monospaced:"Polaris-TextField--monospaced"};const Rn=d.forwardRef(function({onChange:o,onClick:l,onMouseDown:x,onMouseUp:c,onBlur:I},F){function C(T){return()=>o(T)}function g(T){return v=>{v.button===0&&x(T)}}return d.createElement("div",{className:n.Spinner,onClick:l,"aria-hidden":!0,ref:F},d.createElement("div",{role:"button",className:n.Segment,tabIndex:-1,onClick:C(1),onMouseDown:g(C(1)),onMouseUp:c,onBlur:I},d.createElement("div",{className:n.SpinnerIcon},d.createElement(ae,{source:mn}))),d.createElement("div",{role:"button",className:n.Segment,tabIndex:-1,onClick:C(-1),onMouseDown:g(C(-1)),onMouseUp:c,onBlur:I},d.createElement("div",{className:n.SpinnerIcon},d.createElement(ae,{source:pn}))))});var V={Connected:"Polaris-Connected",Item:"Polaris-Connected__Item","Item-primary":"Polaris-Connected__Item--primary","Item-focused":"Polaris-Connected__Item--focused"};function ie({children:t,position:o}){const{value:l,setTrue:x,setFalse:c}=hn(!1),I=D(V.Item,l&&V["Item-focused"],o==="primary"?V["Item-primary"]:V["Item-connection"]);return d.createElement("div",{onBlur:c,onFocus:x,className:I},t)}function Mn({children:t,left:o,right:l}){const x=o?d.createElement(ie,{position:"left"},o):null,c=l?d.createElement(ie,{position:"right"},l):null;return d.createElement("div",{className:V.Connected},x,d.createElement(ie,{position:"primary"},t),c)}function Nn({contents:t,currentHeight:o=null,minimumLines:l,onHeightChange:x}){const c=a.useRef(null),I=a.useRef(null),F=a.useRef(),C=a.useRef(o);o!==C.current&&(C.current=o),a.useEffect(()=>()=>{F.current&&cancelAnimationFrame(F.current)},[]);const g=l?h("div",{ref:I,className:n.DummyInput,dangerouslySetInnerHTML:{__html:Bn(l)}}):null,T=a.useCallback(()=>{F.current&&cancelAnimationFrame(F.current),F.current=requestAnimationFrame(()=>{if(!c.current||!I.current)return;const v=Math.max(c.current.offsetHeight,I.current.offsetHeight);v!==C.current&&x(v)})},[x]);return xn(()=>{T()}),K("div",{"aria-hidden":!0,className:n.Resizer,children:[h(In,{event:"resize",handler:T}),h("div",{ref:c,className:n.DummyInput,dangerouslySetInnerHTML:{__html:wn(t)}}),g]})}const ve={"&":"&amp;","<":"&lt;",">":"&gt;","\n":"<br>","\r":""},Sn=new RegExp(`[${Object.keys(ve).join()}]`,"g");function yn(t){return ve[t]}function Bn(t){let o="";for(let l=0;l<t;l++)o+="<br>";return o}function wn(t){return t?`${t.replace(Sn,yn)}<br>`:"<br>"}function Hn({prefix:t,suffix:o,verticalContent:l,placeholder:x,value:c="",helpText:I,label:F,labelAction:C,labelHidden:g,disabled:T,clearButton:v,readOnly:q,autoFocus:ge,focused:z,multiline:p,error:L,connectedRight:oe,connectedLeft:le,type:f="text",name:ke,id:Re,role:Me,step:H,largeStep:A,autoComplete:Ne,max:k,maxLength:N,maxHeight:Se,min:R,minLength:ye,pattern:Be,inputMode:we,spellCheck:$e,ariaOwns:De,ariaControls:Ve,ariaExpanded:ze,ariaActiveDescendant:Le,ariaAutocomplete:He,showCharacterCount:se,align:ce,requiredIndicator:ue,monospaced:Ae,selectTextOnFocus:Oe,suggestion:P,onClearButtonClick:de,onChange:b,onSpinnerChange:E,onFocus:fe,onBlur:me,borderless:je}){const W=Tn(),[X,Ue]=a.useState(null),[S,G]=a.useState(!!z),Ke=Cn(),r=bn("TextField",Re),m=a.useRef(null),Q=a.useRef(null),J=a.useRef(null),Y=a.useRef(null),O=a.useRef(null),Z=a.useRef(),ee=a.useRef(null);a.useEffect(()=>{const e=p?Q.current:m.current;!e||z===void 0||(z?e.focus():e.blur())},[z,l,p]),a.useEffect(()=>{const e=m.current;!e||!(f==="text"||f==="tel"||f==="search"||f==="url"||f==="password")||!P||e.setSelectionRange(c.length,P.length)},[S,c,f,P]);const y=P||c,pe=H??1,he=k??1/0,xe=R??-1/0,qe=D(n.TextField,!!y&&n.hasValue,T&&n.disabled,q&&n.readOnly,L&&n.error,p&&n.multiline,S&&n.focus,je&&n.borderless),We=f==="currency"?"text":f,j=f==="number"||f==="integer",Xe=t?h("div",{className:n.Prefix,id:`${r}-Prefix`,ref:J,children:t}):null,Ge=o?h("div",{className:n.Suffix,id:`${r}-Suffix`,ref:Y,children:o}):null;let Ie=null;if(se){const e=y.length,i=N?W.translate("Polaris.TextField.characterCountWithMaxLength",{count:e,limit:N}):W.translate("Polaris.TextField.characterCount",{count:e}),u=D(n.CharacterCount,p&&n.AlignFieldBottom),s=N?`${e}/${N}`:e;Ie=h("div",{id:`${r}-CharacterCounter`,className:u,"aria-label":i,"aria-live":S?"polite":"off","aria-atomic":"true",onClick:U,children:s})}const Qe=v&&y!==""?K("button",{type:"button",className:n.ClearButton,onClick:cn,disabled:T,children:[h(Fn,{as:"span",visuallyHidden:!0,children:W.translate("Polaris.Common.clear")}),h(ae,{source:kn,color:"base"})]}):null,ne=a.useCallback((e,i=pe)=>{if(b==null&&E==null)return;const u=fn=>(fn.toString().split(".")[1]||[]).length,s=c?parseFloat(c):0;if(isNaN(s))return;const _=f==="integer"?0:Math.max(u(s),u(i)),M=Math.min(Number(he),Math.max(s+e*i,Number(xe)));E!=null?E(String(M.toFixed(_)),r):b!=null&&b(String(M.toFixed(_)),r)},[r,he,xe,b,E,pe,f,c]),te=a.useCallback(()=>{clearTimeout(Z.current)},[]),Je=a.useCallback(e=>{let s=200;const _=()=>{s>50&&(s-=10),e(0),Z.current=window.setTimeout(_,s)};Z.current=window.setTimeout(_,s),document.addEventListener("mouseup",te,{once:!0})},[te]),Ye=j&&H!==0&&!T&&!q?h(Rn,{onClick:U,onChange:ne,onMouseDown:Je,onMouseUp:te,ref:ee,onBlur:Fe}):null,Ze=p&&X?{height:X,maxHeight:Se}:null,en=a.useCallback(e=>{Ue(e)},[]),nn=p&&Ke?h(Nn,{contents:y||x,currentHeight:X,minimumLines:typeof p=="number"?p:1,onHeightChange:en}):null,B=[];L&&B.push(`${r}Error`),I&&B.push(vn(r)),se&&B.push(`${r}-CharacterCounter`);const w=[];t&&w.push(`${r}-Prefix`),o&&w.push(`${r}-Suffix`),l&&w.push(`${r}-VerticalContent`),w.unshift(gn(r));const tn=D(n.Input,ce&&n[Pn("Input-align",ce)],o&&n["Input-suffixed"],v&&n["Input-hasClearButton"],Ae&&n.monospaced,P&&n.suggestion),Te=e=>{if(G(!0),Oe&&!P){const i=p?Q.current:m.current;i==null||i.select()}fe&&fe(e)};_n("wheel",rn,m);function rn(e){document.activeElement===e.target&&j&&e.stopPropagation()}const Ce=a.createElement(p?"textarea":"input",{name:ke,id:r,disabled:T,readOnly:q,role:Me,autoFocus:ge,value:y,placeholder:x,style:Ze,autoComplete:Ne,className:tn,ref:p?Q:m,min:R,max:k,step:H,minLength:ye,maxLength:N,spellCheck:$e,pattern:Be,inputMode:we,type:We,rows:$n(p),"aria-describedby":B.length?B.join(" "):void 0,"aria-labelledby":w.join(" "),"aria-invalid":!!L,"aria-owns":De,"aria-activedescendant":Le,"aria-autocomplete":He,"aria-controls":Ve,"aria-expanded":ze,"aria-required":ue,...Dn(p),onFocus:Te,onBlur:Fe,onClick:U,onKeyPress:un,onKeyDown:dn,onChange:P?void 0:be,onInput:P?be:void 0}),an=l?K("div",{className:n.VerticalContent,id:`${r}-VerticalContent`,ref:O,onClick:U,children:[l,Ce]}):null,on=l?an:Ce,ln=h("div",{className:D(n.Backdrop,le&&n["Backdrop-connectedLeft"],oe&&n["Backdrop-connectedRight"])});return h(En,{label:F,id:r,error:L,action:C,labelHidden:g,helpText:I,requiredIndicator:ue,children:h(Mn,{left:le,right:oe,children:K("div",{className:qe,onClick:sn,children:[Xe,on,Ge,Ie,Qe,Ye,ln,nn]})})});function be(e){b&&b(e.currentTarget.value,r)}function sn(e){var i,u;const{target:s}=e,_=m==null||(i=m.current)===null||i===void 0?void 0:i.getAttribute("role");if(s===m.current&&_==="combobox"){var M;(M=m.current)===null||M===void 0||M.focus(),Te(e);return}Pe(s)||Ee(s)||re(s)||_e(s)||S||(u=m.current)===null||u===void 0||u.focus()}function U(e){!_e(e.target)&&!re(e.target)&&e.stopPropagation(),!(Pe(e.target)||Ee(e.target)||re(e.target)||S)&&G(!0)}function cn(){de&&de(r)}function un(e){const{key:i,which:u}=e,s=/[\d.,eE+-]$/,_=/[\deE+-]$/;!j||u===$.Enter||f==="number"&&s.test(i)||f==="integer"&&_.test(i)||e.preventDefault()}function dn(e){if(!j)return;const{key:i,which:u}=e;(u===$.Home||i==="Home")&&R!==void 0&&(E!=null?E(String(R),r):b!=null&&b(String(R),r)),(u===$.End||i==="End")&&k!==void 0&&(E!=null?E(String(k),r):b!=null&&b(String(k),r)),(u===$.PageUp||i==="PageUp")&&A!==void 0&&ne(1,A),(u===$.PageDown||i==="PageDown")&&A!==void 0&&ne(-1,A)}function Fe(e){G(!1),me&&me(e)}function re(e){return e instanceof HTMLElement&&m.current&&(m.current.contains(e)||m.current.contains(document.activeElement))}function Pe(e){return e instanceof Element&&(J.current&&J.current.contains(e)||Y.current&&Y.current.contains(e))}function _e(e){return e instanceof Element&&ee.current&&ee.current.contains(e)}function Ee(e){return e instanceof Element&&O.current&&(O.current.contains(e)||O.current.contains(document.activeElement))}}function $n(t){if(t)return typeof t=="number"?t:1}function Dn(t){if(t)return t||typeof t=="number"&&t>0?{"aria-multiline":!0}:void 0}export{Hn as T};
