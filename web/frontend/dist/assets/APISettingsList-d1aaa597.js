import{u as B,be as D,a as c,b as h,d as U,bD as q,e as d,j as o,U as P,K as y,P as K,F,q as O,k as W,bE as $}from"./index-cdbbdef1.js";import{h as z}from"./moment-fbc5633a.js";import{C as G}from"./index-8f8c825c.js";import{u as H,I as s}from"./IndexTable-220c9c54.js";import{E as J}from"./SelectAllActions-c4a9dcba.js";import"./set-root-property-5afc98ee.js";import"./Checkbox-a1799219.js";import"./InlineError-fe270c03.js";import"./TickSmallMinor.svg-3b3bc779.js";function ne(){var C,g;const i=B(),p=D(),[f,a]=c.useState(!1),[v,x]=c.useState(null),r=h(e=>{var l;return(l=e==null?void 0:e.shopId)==null?void 0:l.shopId}),t=h(e=>{var l;return(l=e==null?void 0:e.anyAPISetting)==null?void 0:l.allApiSettingData}),u=h(e=>{var l,n;return(n=(l=e==null?void 0:e.inputField)==null?void 0:l.finalFormData)==null?void 0:n.formData}),N={singular:"apiList",plural:"apiLists"},{selectedResources:I,allResourcesSelected:b,handleSelectionChange:k}=H(t==null?void 0:t.data);c.useEffect(()=>{i(U(r)),i(q(r))},[i,r]);function L(e){var n;const l=u==null?void 0:u.find(m=>m._id===e);return l?(n=l==null?void 0:l.customForm[0])==null?void 0:n.formTitle:"Form not found"}const R=()=>{p("/add-api")},S=e=>{x(e),a(!0)},w=c.useCallback(()=>{a(!1)},[]),E=()=>{i($({deleteLogArr:v,shopId:r})),a(!1)},M=(t==null?void 0:t.data)&&((C=t==null?void 0:t.data)==null?void 0:C.map(({_id:e,apiTitle:l,apiUrl:n,createdAt:m,form:T},Y)=>d(s.Row,{id:e,selected:I.includes(e),position:Y,children:[o(s.Cell,{children:L(T)}),o(s.Cell,{children:l}),o(s.Cell,{children:n}),o(s.Cell,{children:z(m).format("YYYY-MM-DD")}),o(s.Cell,{children:d("div",{style:{display:"flex",justifyContent:"center"},children:[o("div",{style:{marginRight:"12px"},children:o(P,{plain:!0,icon:y.edit,onClick:()=>p(`/edit-api/${e}`)})}),o("div",{children:o(P,{plain:!0,icon:y.delete,onClick:()=>S(e)})})]})})]},e))),A=!r||(t==null?void 0:t.loading),j=o(F,{children:A?null:o(J,{title:"No APIs found",withIllustration:!0})});return d(K,{fullWidth:!0,title:"Contact Form with API List",primaryAction:{content:"Add New API",onAction:()=>R()},children:[d(F,{children:[o(O,{children:o(s,{resourceName:N,loading:A,itemCount:((g=t==null?void 0:t.data)==null?void 0:g.length)||0,emptyState:j,selectedItemsCount:b?"All":I.length,onSelectionChange:k,selectable:!1,headings:[{title:"Form Name"},{title:"API Name"},{title:"API URL"},{title:"Created Date"},{title:"Action",alignment:"center"}],children:M})}),o(W,{})]}),f&&o(G,{active:f,handleClose:w,handleDelete:E,title:"Are you sure to delete selected API data?",description:"<p><strong>Note:</strong> Deleting this API will also remove the logs created for this API</p>"})]})}export{ne as default};
