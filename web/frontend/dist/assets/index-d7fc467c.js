import{a as d,_ as W,l as G,u as sa,m as f,n as ca,b as P,e as i,P as ta,j as a,o as l,p as z,S as r,B as L,q as m,F as ia,t as ra,v as Y,w as oa,k as pa,x as da,y as ha,z as _a,A as ua,C as ga,D as ma,E as fa,I as $,G as q}from"./index-02b1340d.js";/* empty css                              */const Pa="/assets/ips_banner_2-7ba41b97.jpg",ba="/assets/ips_banner_1-e7d496e0.png",Na="/assets/ips_banner_3-607b5e97.jpg";const ya=d.lazy(()=>W(()=>import("./index-d5a6afb9.js"),["assets/index-d5a6afb9.js","assets/index-02b1340d.js","assets/index-ac84de1a.css"])),Ta=d.lazy(()=>W(()=>import("./paymentModal-27a218ff.js"),["assets/paymentModal-27a218ff.js","assets/index-02b1340d.js","assets/index-ac84de1a.css"]));function Ea(){var O;const M=G.useAppBridge(),u=sa(),X=f.Fullscreen.create(M),b=ca({url:"/api/shop"}),[F,N]=d.useState(!1);d.useState({});const[Q,H]=d.useState(!1),c=P(e=>{var s,t;return(t=(s=e.subscription)==null?void 0:s.subscriptionData)==null?void 0:t.data}),x=P(e=>{var s;return(s=e==null?void 0:e.shopId)==null?void 0:s.shopId}),n=P(e=>{var s,t;return(t=(s=e==null?void 0:e.user)==null?void 0:s.userData)==null?void 0:t.user}),J=G.useNavigate(),[Z,wa]=d.useState(),[A,D]=d.useState(!1),U=e=>{N(!0),H(!0)},K=P(e=>{var s;return(s=e==null?void 0:e.shopId)==null?void 0:s.appName}),aa=d.useCallback(()=>{N(!1)},[]),ea=async e=>{var s,t;if(e===r.FREE){const{id:o,name:y,email:T,domain:la,city:w,country:R,country_code:I,customer_email:E,shop_owner:S,myshopify_domain:g,phone:v}=b;let h={shopId:o,shopName:y,email:T,domain:g,city:w,country:R,countryCode:I,customer_email:E,shop_owner:S,myshopify_domain:g,phone:v};c.filter(({subscriptionName:p,_id:C},_)=>{p===e&&(h={...h,subscriptionName:p,subscriptionId:C})}),u(da(h)).then(p=>{p!=null&&p.payload&&(u(ha(o)),V(),J("/dashboard",{replace:!0}))})}else if(e===r.PREMIUM){const{id:o,name:y,email:T,domain:la,city:w,country:R,country_code:I,customer_email:E,shop_owner:S,myshopify_domain:g,phone:v}=b.data;let h={shopId:o,shopName:y,email:T,domain:g,city:w,country:R,countryCode:I,customer_email:E,shop_owner:S,myshopify_domain:g,phone:v,subscriptionId:c[0].id,subscriptionName:c[0].subscriptionName};c.filter(({subscriptionName:_,_id:j},B)=>{_===e&&(h={...h,subscriptionName:_,subscriptionId:j})});let p=_a(K,b.data);const C={priceId:(s=ua)==null?void 0:s.PREMIUM_USD,plan:e,successUrl:(t=p==null?void 0:p.premium_subscription)==null?void 0:t.return_url,user:h};await ga.post("/payment/create-session-checkout",C).then(_=>{var B;f.Redirect.create(M).dispatch(f.Redirect.Action.REMOTE,(B=_==null?void 0:_.data)==null?void 0:B.redirectUrl)})}};d.useEffect(()=>{X.dispatch(f.Fullscreen.Action.EXIT)},[u]);const na=async()=>{var e;u(ma({id:(e=n==null?void 0:n.subscription)==null?void 0:e.stripeSubscriptionId,shopId:x})).then(s=>u(fa(x))),N(!1),H(!1)},k=e=>e===!0?a("span",{className:l.planPriceValue,children:a($,{source:q.tick,color:"primary"})}):e===!1||e===null?a("span",{className:l.planPriceValue,children:a($,{source:q.cancel,color:"critical"})}):e,V=()=>{D(!1)};return i(ta,{fullWidth:!0,title:"Pricing Plans",children:[A?a(Ta,{active:A,priceId:Z,toggleModal:V,setShowCardElement:D}):null,i("div",{style:{display:"flex"},children:[i("div",{className:l.planPageLeft,children:[a(z,{children:a(z.Section,{children:a("div",{className:"grid",children:i("div",{className:l.planGridItem,children:[a("div",{className:l.planBoxHeading,children:a("h4",{className:`${l.planBoxHeadingText} ${(n==null?void 0:n.subscriptionName)===r.FREE?l.freePlanHeader:l.premiumPlanHeader}`,children:"Your current plan"})}),i("table",{className:l.planPicingTable,border:1,children:[a("thead",{children:i("tr",{children:[a("th",{scope:"col"}),c==null?void 0:c.map(e=>a("th",{scope:"col",children:a("p",{style:{marginTop:"10px"},children:e==null?void 0:e.subscriptionName.toUpperCase()})}))]})}),i("tbody",{children:[a("th",{scope:"row",className:l.rowTransparent,children:a("div",{className:l.planRowTitle,children:a("span",{className:l.planPriceTitle,children:"Price"})})}),c==null?void 0:c.map(e=>{var s,t;return i("td",{className:l.planPricingRow,children:[i("div",{className:l.planMonthlyPrice,children:[a("span",{className:l.planMonthlyPriceCur,children:e.curruncyType}),a("span",{className:l.planPriceValue,children:a("span",{className:l.planPrice,children:a("span",{children:a("span",{className:l.planRupees,children:e.price})})})}),i("span",{className:l.planMonth,children:["/",a("span",{children:"mo"})]})]}),(e==null?void 0:e.subscriptionName)===r.FREE&&a("div",{className:"d-grid ",style:{visibility:"hidden"},children:a(L,{variant:"secondary",className:`${(n==null?void 0:n.subscriptionName)!==r.FREE?l.planButtonSuccess:""}`,disabled:(n==null?void 0:n.subscriptionName)===r.FREE||n&&(n==null?void 0:n.subscriptionName)===r.PREMIUM||((s=n==null?void 0:n.subscription)==null?void 0:s.cancel_at_period_end),onClick:U,children:a("span",{children:a("span",{children:a("span",{className:l.planButtonFontStyle,children:(n==null?void 0:n.subscriptionName)===r.FREE?m.ACTIVE_PLAN:m.CHOOSE_PLAN})})})})}),(e==null?void 0:e.subscriptionName)===r.PREMIUM&&a(ia,{children:(n==null?void 0:n.subscriptionName)!==r.PREMIUM?a("div",{className:"d-grid gap-2",children:a(L,{variant:"primary",onClick:()=>ea(e==null?void 0:e.subscriptionName,e==null?void 0:e.stripePriceId),disabled:(n==null?void 0:n.subscriptionName)===r.PREMIUM,loading:!n,children:a("span",{children:a("span",{children:a("span",{className:l.planButtonFontStyle,children:(n==null?void 0:n.subscriptionName)===r.PREMIUM?m.CURRENT_PLAN:m.UPGRADE_PLAN})})})})}):a("div",{className:"d-grid gap-2",children:a(L,{variant:"danger",onClick:U,disabled:(t=n==null?void 0:n.subscription)==null?void 0:t.cancel_at_period_end,children:a("span",{children:a("span",{children:a("span",{className:l.planButtonFontStyle,children:m.CANCEL_PLAN})})})})})})]})}),a("tr",{children:a("th",{colSpan:3,className:l.planFeatureTitle,children:a("span",{className:l.planTableHeader,children:a("span",{className:l.planFeatureHeader,children:"Features"})})})}),(c==null?void 0:c.length)>0&&Object.keys((O=c[0])==null?void 0:O.features).map(e=>{var s;return i(ra.Fragment,{children:[a("tr",{children:a("th",{colSpan:3,children:a("span",{className:l.planTableHeader,children:a("span",{children:Y(e)})})})}),Object.entries((s=c[0])==null?void 0:s.features[e]).map(([t,o])=>i("tr",{children:[a("th",{scope:"row",className:l.planRowData,children:a("div",{className:l.planRowTitle,children:i("dl",{className:l.planLabelName,children:[a("dt",{className:l.planLabelText,children:a("span",{children:Y(o==null?void 0:o.label)})}),a("dd",{className:l.planLabelDescription,children:oa(o==null?void 0:o.description)})]})})}),a("td",{children:k(c[0].features[e][t].value)}),a("td",{children:k(c[1].features[e][t].value)})]},t))]},e)})]})]})]})})})}),F&&a(ya,{active:F,isCancelPlan:Q,handleClose:aa,handleCancelSubscription:na,title:"Are you sure to cancel the current plan?",description:"<p><strong>Note: </strong> Canceling this subscription plan will result in the following:</p>\r <ul>\r <li>Upon cancellation, you'll retain access to premium features until the end of the current billing cycle.</li>\r <li>You won't be charged for the following month, and after the current period, your subscription will automatically switch to the Free plan.</li>\r <li>While premium features will no longer be available and you can not access forms created under the premium plan.</li>\r </ul>\r <p>Please review our <a href='https://www.contactformtoapi.com/terms-of-service/' target='_blank' >terms and conditions</a> for detailed information.</p>\r <p>If you have any questions, our <a href='https://www.contactformtoapi.com/' target='_blank'>customer support</a> is ready to assist.</p>\r <p>Thank you for being a valued subscriber!</p>"})]}),i("div",{className:l.planPageRight,children:[a("a",{href:"https://www.itpathsolutions.com/contact-us/",target:"_blank",children:a("img",{src:Pa,alt:""})}),a("a",{href:"https://apps.shopify.com/contact-form-to-any-api",target:"_blank",children:a("img",{src:ba,alt:"",style:{width:"100%",marginTop:"7px"}})}),a("a",{href:"https://www.itpathsolutions.com/contact-us/",target:"_blank",children:a("img",{src:Na,alt:"",style:{width:"100%",marginTop:"7px"}})})]})]}),a(pa,{})]})}export{Ea as default};
