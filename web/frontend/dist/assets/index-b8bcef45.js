import{a as c,N as j,j as e,O as N,Q as Y,v as fe,M as be,T as Ce,U as H,V as Se,e as h,F as Ne,W as pe,X as _e,Y as ye,Z as Fe,$ as xe,J as O,a0 as Te,a1 as me,a2 as Pe,a3 as he,a4 as Me,a5 as Be,a6 as ke,a7 as Re,a8 as Ae,a9 as J,aa as Ee,ab as Le,_ as Ie,m as we,n as Z,u as De,b as I,ac as Oe,ad as Ke,P as We,i as Q,q as U,K as X,ae as ee,k as te,af as ae,ag as He,ah as $e,ai as Ge}from"./index-cdbbdef1.js";import{s as ne}from"./set-root-property-5afc98ee.js";import{u as Ue,a as je}from"./use-deep-effect-54ba29ed.js";import{S as Ve}from"./InlineError-fe270c03.js";import{H as q}from"./Heading-ad735ff4.js";import{F as se}from"./Form-d3c2cfeb.js";import{F as oe,G as T}from"./Grid-f159d32c.js";import{T as w}from"./TextField-a28bba39.js";import{S as ze}from"./Select-a4816d0f.js";import"./index-f1ff8313.js";import"./Labelled-c5d2484a.js";const ge=c.createContext(void 0);function Qe(){const n=c.useContext(ge);if(!n)throw new Error("No Frame context was provided. Your component must be wrapped in a <Frame> component. See https://polaris.shopify.com/components/frame for implementation instructions.");return n}var m={Frame:"Polaris-Frame",Navigation:"Polaris-Frame__Navigation",hasTopBar:"Polaris-Frame--hasTopBar","Navigation-enter":"Polaris-Frame__Navigation--enter","Navigation-enterActive":"Polaris-Frame__Navigation--enterActive","Navigation-exit":"Polaris-Frame__Navigation--exit","Navigation-exitActive":"Polaris-Frame__Navigation--exitActive",NavigationDismiss:"Polaris-Frame__NavigationDismiss","Navigation-visible":"Polaris-Frame__Navigation--visible",TopBar:"Polaris-Frame__TopBar",ContextualSaveBar:"Polaris-Frame__ContextualSaveBar",Main:"Polaris-Frame__Main",hasNav:"Polaris-Frame--hasNav",Content:"Polaris-Frame__Content",GlobalRibbonContainer:"Polaris-Frame__GlobalRibbonContainer",LoadingBar:"Polaris-Frame__LoadingBar",Skip:"Polaris-Frame__Skip",focused:"Polaris-Frame--focused",pressed:"Polaris-Frame--pressed"};function Xe(){const n=c.useRef(!1);return c.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),n}var ie={Loading:"Polaris-Frame-Loading",Level:"Polaris-Frame-Loading__Level"};const re=99;function qe(){const n=j(),o=Xe(),[t,a]=c.useState(0),[i,l]=c.useState(!1);c.useEffect(()=>{t>=re||i||requestAnimationFrame(()=>{if(!o.current)return;const u=Math.max((re-t)/10,1);l(!0),a(t+u)})},[t,i,o]);const g={transform:`scaleX(${Math.floor(t)/100})`};return e("div",{className:ie.Loading,"aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":n.translate("Polaris.Loading.label"),children:e("div",{className:ie.Level,style:g,onTransitionEnd:()=>l(!1)})})}var le={startFade:"Polaris-Frame-CSSAnimation--startFade",endFade:"Polaris-Frame-CSSAnimation--endFade"},F;(function(n){n.Entering="entering",n.Entered="entered",n.Exiting="exiting",n.Exited="exited"})(F||(F={}));function Ye({in:n,className:o,type:t,children:a}){const[i,l]=c.useState(n?F.Entering:F.Exited),g=c.useRef(!1),u=c.useRef(null);c.useEffect(()=>{g.current&&i===F.Entering&&d(F.Entered)},[i]),c.useEffect(()=>{g.current&&(n&&d(F.Entering),!n&&d(F.Exiting))},[n]),c.useEffect(()=>{g.current=!0},[]);const v=N(o,le[Y("start",t)],n&&le[Y("end",t)]),_=i===F.Exited&&!n?null:a;return e("div",{className:v,ref:u,onTransitionEnd:p,children:_});function p(){i===F.Exiting&&d(F.Exited)}function d(b){l(b),b===F.Entering&&u.current&&u.current.getBoundingClientRect()}}function Je(n){const o=typeof n;return n!=null&&(o==="object"||o==="function")}function ve(n,o){if(!n)return null;const t=Object.keys(n);for(const a of t){if(a===o)return n[o];if(Je(n[a])){const i=ve(n[a],o);if(i)return i}}return null}function Ze(n={},o=0,t="width"){const a=typeof n=="number"?n:ve(n,t);return a?`${a}px`:`${o}px`}var D={ContextualSaveBar:"Polaris-Frame-ContextualSaveBar",LogoContainer:"Polaris-Frame-ContextualSaveBar__LogoContainer",ContextControl:"Polaris-Frame-ContextualSaveBar__ContextControl",Contents:"Polaris-Frame-ContextualSaveBar__Contents",fullWidth:"Polaris-Frame-ContextualSaveBar--fullWidth",ActionContainer:"Polaris-Frame-ContextualSaveBar__ActionContainer",Action:"Polaris-Frame-ContextualSaveBar__Action"};function et({open:n,onDiscard:o,onCancel:t}){const a=j();return fe.createElement(be,{title:a.translate("Polaris.DiscardConfirmationModal.title"),open:n,onClose:t,primaryAction:{content:a.translate("Polaris.DiscardConfirmationModal.primaryAction"),destructive:!0,onAction:o},secondaryActions:[{content:a.translate("Polaris.DiscardConfirmationModal.secondaryAction"),onAction:t}],sectioned:!0},a.translate("Polaris.DiscardConfirmationModal.message"))}function tt({alignContentFlush:n,message:o,saveAction:t,discardAction:a,fullWidth:i,contextControl:l,secondaryMenu:g}){const u=j(),{logo:v}=Qe(),{value:_,toggle:p,setFalse:d}=Ce(!1),b=c.useCallback(()=>{a&&a.onAction&&a.onAction(),d()},[d,a]),y=a&&a.content?a.content:u.translate("Polaris.ContextualSaveBar.discard");let C;a&&a.discardConfirmationModal?C=p:a&&(C=a.onAction);const x=a&&a.onAction&&a.discardConfirmationModal&&e(et,{open:_,onCancel:p,onDiscard:b}),S=a&&e(H,{url:a.url,onClick:C,loading:a.loading,disabled:a.disabled,accessibilityLabel:a.content,children:y}),P=t&&t.content?t.content:u.translate("Polaris.ContextualSaveBar.save"),A=t&&e(H,{primary:!0,url:t.url,onClick:t.onAction,loading:t.loading,disabled:t.disabled,accessibilityLabel:t.content,children:P}),M=Ze(v,104),E=v&&e(Se,{style:{width:M},source:v.contextualSaveBarSource||"",alt:""}),B=n||l?null:e("div",{className:D.LogoContainer,style:{width:M},children:E}),L=l?e("div",{className:D.ContextControl,children:l}):null,K=N(D.Contents,i&&D.fullWidth);return h(Ne,{children:[h("div",{className:D.ContextualSaveBar,children:[L,B,h("div",{className:K,children:[o&&e(pe,{as:"h2",variant:"headingMd",color:"text-inverse",truncate:!0,children:o}),e("div",{className:D.ActionContainer,children:h(_e,{spacing:"tight",wrap:!1,children:[g,S,A]})})]})]}),x]})}function at(n,o,t){return c.useCallback(n,Ue(o,t))}var R={ToastManager:"Polaris-Frame-ToastManager",ToastWrapper:"Polaris-Frame-ToastManager__ToastWrapper","ToastWrapper-enter":"Polaris-Frame-ToastManager__ToastWrapper--enter","ToastWrapper-exit":"Polaris-Frame-ToastManager__ToastWrapper--exit","ToastWrapper-enter-done":"Polaris-Frame-ToastManager--toastWrapperEnterDone"},W={Toast:"Polaris-Frame-Toast",Action:"Polaris-Frame-Toast__Action",error:"Polaris-Frame-Toast--error",CloseButton:"Polaris-Frame-Toast__CloseButton",LeadingIcon:"Polaris-Frame-Toast__LeadingIcon"};const nt=5e3,ce=1e4;function st({content:n,onDismiss:o,duration:t,error:a,action:i}){c.useEffect(()=>{let _=t||nt;i&&!t?_=ce:i&&t&&t<ce&&console.log("Toast with action should persist for at least 10,000 milliseconds to give the merchant enough time to act on it.");const p=setTimeout(o,_);return()=>{clearTimeout(p)}},[i,t,o]);const l=e("button",{type:"button",className:W.CloseButton,onClick:o,children:e(O,{source:Te})}),g=i?e("div",{className:W.Action,children:e(H,{plain:!0,monochrome:!0,size:"slim",onClick:i.onAction,children:i.content})}):null,u=a?e("div",{className:W.LeadingIcon,children:e(O,{source:Ve,color:"base"})}):null,v=N(W.Toast,a&&W.error);return h("div",{className:v,children:[e(ye,{keyCode:Fe.Escape,handler:o}),u,e(xe,{gap:"4",blockAlign:"center",children:e(pe,{as:"span",fontWeight:"medium",children:n})}),g,l]})}const ot=c.memo(function({toastMessages:o}){const t=[],a=at(()=>{let l=0;o.forEach((g,u)=>{const v=t[u];v.current&&(l+=v.current.clientHeight,v.current.style.setProperty("--pc-toast-manager-translate-y-in",`-${l}px`),v.current.style.setProperty("--pc-toast-manager-translate-y-out",`${-l+150}px`))})},[o,t]);je(()=>{a()},[o]);const i=o.map((l,g)=>{const u=c.createRef();return t[g]=u,e(me,{nodeRef:t[g],timeout:{enter:0,exit:400},classNames:it,children:e("div",{ref:u,children:e(st,{...l})})},l.id)});return h(Pe,{children:[e(he,{event:"resize",handler:a}),e("div",{className:R.ToastManager,"aria-live":"assertive",children:e(Me,{component:null,children:i})})]})}),it={enter:N(R.ToastWrapper,R["ToastWrapper-enter"]),enterDone:N(R.ToastWrapper,R["ToastWrapper-enter-done"]),exit:N(R.ToastWrapper,R["ToastWrapper-exit"])},de="AppFrameMain",rt="AppFrameNav",lt="AppFrameTopBar",ct="AppFrameLoadingBar";class dt extends c.PureComponent{constructor(...o){super(...o),this.state={skipFocused:!1,globalRibbonHeight:0,loadingStack:0,toastMessages:[],showContextualSaveBar:!1},this.contextualSaveBar=null,this.globalRibbonContainer=null,this.navigationNode=c.createRef(),this.setGlobalRibbonHeight=()=>{const{globalRibbonContainer:t}=this;t&&this.setState({globalRibbonHeight:t.offsetHeight},this.setGlobalRibbonRootProperty)},this.setOffset=()=>{const{offset:t="0px"}=this.props;ne("--pc-frame-offset",t)},this.setGlobalRibbonRootProperty=()=>{const{globalRibbonHeight:t}=this.state;ne("--pc-frame-global-ribbon-height",`${t}px`)},this.showToast=t=>{this.setState(({toastMessages:a})=>({toastMessages:a.find(({id:l})=>l===t.id)!=null?a:[...a,t]}))},this.hideToast=({id:t})=>{this.setState(({toastMessages:a})=>({toastMessages:a.filter(({id:i})=>t!==i)}))},this.setContextualSaveBar=t=>{const{showContextualSaveBar:a}=this.state;this.contextualSaveBar={...t},a===!0?this.forceUpdate():this.setState({showContextualSaveBar:!0})},this.removeContextualSaveBar=()=>{this.contextualSaveBar=null,this.setState({showContextualSaveBar:!1})},this.startLoading=()=>{this.setState(({loadingStack:t})=>({loadingStack:t+1}))},this.stopLoading=()=>{this.setState(({loadingStack:t})=>({loadingStack:Math.max(0,t-1)}))},this.handleResize=()=>{this.props.globalRibbon&&this.setGlobalRibbonHeight()},this.handleFocus=()=>{this.setState({skipFocused:!0})},this.handleBlur=()=>{this.setState({skipFocused:!1})},this.handleClick=t=>{const{skipToContentTarget:a}=this.props;a&&a.current&&(a.current.focus(),t==null||t.preventDefault())},this.handleNavigationDismiss=()=>{const{onNavigationDismiss:t}=this.props;t!=null&&t()},this.setGlobalRibbonContainer=t=>{this.globalRibbonContainer=t},this.handleNavKeydown=t=>{const{key:a}=t,{mediaQuery:{isNavigationCollapsed:i},showMobileNavigation:l}=this.props;i&&l&&a==="Escape"&&this.handleNavigationDismiss()}}componentDidMount(){this.handleResize(),!this.props.globalRibbon&&(this.setGlobalRibbonRootProperty(),this.setOffset())}componentDidUpdate(o){this.props.globalRibbon!==o.globalRibbon&&this.setGlobalRibbonHeight(),this.setOffset()}render(){const{skipFocused:o,loadingStack:t,toastMessages:a,showContextualSaveBar:i}=this.state,{logo:l,children:g,navigation:u,topBar:v,globalRibbon:_,showMobileNavigation:p=!1,skipToContentTarget:d,i18n:b,mediaQuery:{isNavigationCollapsed:y}}=this.props,C=N(m.Navigation,p&&m["Navigation-visible"]),x=y&&!p,S=y&&p,P=S?0:-1,A={...S&&{"aria-modal":!0,role:"dialog"}},M=u?e(ke,{trapping:S,children:e(me,{nodeRef:this.navigationNode,appear:y,exit:y,in:p,timeout:parseInt(Re["duration-300"],10),classNames:ut,children:h("div",{...Object.assign({key:"NavContent"},A,{"aria-label":b.translate("Polaris.Frame.navigationLabel"),ref:this.navigationNode,className:C,onKeyDown:this.handleNavKeydown,id:rt,hidden:x}),children:[u,e("button",{type:"button",className:m.NavigationDismiss,onClick:this.handleNavigationDismiss,"aria-hidden":x||!y&&!p,"aria-label":b.translate("Polaris.Frame.Navigation.closeMobileNavigationLabel"),tabIndex:P,children:e(O,{source:Ae})})]})})}):null,E=t>0?e("div",{className:m.LoadingBar,id:ct,children:e(qe,{})}):null,B=e(Ye,{in:i,className:m.ContextualSaveBar,type:"fade",children:e(tt,{...this.contextualSaveBar})}),L=v?e("div",{...Object.assign({className:m.TopBar},J.props,Ee.props,{id:lt}),children:v}):null,K=_?e("div",{className:m.GlobalRibbonContainer,ref:this.setGlobalRibbonContainer,children:_}):null,V=N(m.Skip,o&&m.focused),z=d!=null&&d.current?d.current.id:de,$=e("div",{className:V,children:e("a",{href:`#${z}`,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,children:b.translate("Polaris.Frame.skipToContent")})}),s=u?{"data-has-navigation":!0}:{},r=N(m.Frame,u&&m.hasNav,v&&m.hasTopBar),f=p&&y?e(Le,{belowNavigation:!0,onClick:this.handleNavigationDismiss,onTouchStart:this.handleNavigationDismiss}):null,G={logo:l,showToast:this.showToast,hideToast:this.hideToast,startLoading:this.startLoading,stopLoading:this.stopLoading,setContextualSaveBar:this.setContextualSaveBar,removeContextualSaveBar:this.removeContextualSaveBar};return e(ge.Provider,{value:G,children:h("div",{...Object.assign({className:r},J.props,s),children:[$,L,M,B,E,f,e("main",{className:m.Main,id:de,"data-has-global-ribbon":!!_,children:e("div",{className:m.Content,children:g})}),e(ot,{toastMessages:a}),K,e(he,{event:"resize",handler:this.handleResize})]})})}}const ut={enter:N(m["Navigation-enter"]),enterActive:N(m["Navigation-enterActive"]),enterDone:N(m["Navigation-enterActive"]),exit:N(m["Navigation-exit"]),exitActive:N(m["Navigation-exitActive"])};function pt(n){const o=j(),t=Be();return e(dt,{...Object.assign({},n,{i18n:o,mediaQuery:t})})}const mt="_ipsContactusSubmissions_7sv3c_1",ht="_saveButton_7sv3c_15",gt="_ipsContactusFormLayoutContainer_7sv3c_23",vt="_ipsTabActive_7sv3c_31",ft="_recaptchaHeadingContainer_7sv3c_41",bt="_ipsAPISupportIcon_7sv3c_51",k={ipsContactusSubmissions:mt,saveButton:ht,ipsContactusFormLayoutContainer:gt,ipsTabActive:vt,recaptchaHeadingContainer:ft,ipsAPISupportIcon:bt},Ct=c.lazy(()=>Ie(()=>import("./index-5b4dc462.js"),["assets/index-5b4dc462.js","assets/index-cdbbdef1.js","assets/index-ac84de1a.css","assets/index-f5d766a6.css"])),ue={smtpName:"",email:"",password:"",mail_encryption:"",port:"",shopId:""};function Rt(){var $;const[n,o]=c.useState(ue),[t,a]=c.useState(!1),[i,l]=c.useState({siteKey:"",secretKey:"",shopId:""}),g=()=>{a(!0)},u=()=>{a(!1)},v=we.useAppBridge(),_=Z.Fullscreen.create(v),p=De(),d=I(s=>{var r;return(r=s==null?void 0:s.setting)==null?void 0:r.settingData}),b=I(s=>{var r,f;return(f=(r=s==null?void 0:s.setting)==null?void 0:r.smtpSettingData)==null?void 0:f.data}),y=I(s=>{var r,f;return(f=(r=s==null?void 0:s.setting)==null?void 0:r.smtpSettingData)==null?void 0:f.isEdit}),C=I(s=>{var r,f;return(f=(r=s==null?void 0:s.user)==null?void 0:r.userData)==null?void 0:f.user}),x=I(s=>s.shopId.shopId),S=I(s=>{var r,f;return(f=(r=s==null?void 0:s.setting)==null?void 0:r.reCaptchaSettingData)==null?void 0:f.data}),[P,A]=c.useState(ue),[M,E]=c.useState("smtp"),B=(s,r)=>{({...n,[s]:0},A({...P,[s]:ae(s,r)})),o({...n,[s]:r,port:r==="ssl"?465:r==="tls"?587:""})},L=(s,r)=>{l({...i,[s]:r})},K=s=>{s.preventDefault(),p(He(i)),l({})},V=s=>{s.preventDefault();const r={};if(Object.keys(n).forEach(f=>{const G=ae(f,n[f]);G&&(r[f]=G)}),Object.keys(r).length){A(r);return}y||d!=null&&d.isEdit?p($e(n)):p(Ge(n))};c.useEffect(()=>{_.dispatch(Z.Fullscreen.Action.EXIT),o({...n,shopId:x}),l({...i,shopId:x}),p(Oe(x)),p(Ke(x))},[x,p]),c.useEffect(()=>{(y||d!=null&&d.isEdit)&&o({email:b.email,smtpName:b.smtpName,password:b.password,mail_encryption:b.mail_encryption,port:b.port,shopId:b.shopId}),S&&l({shopId:x,siteKey:S==null?void 0:S.siteKey,secretKey:S==null?void 0:S.secretKey})},[b,S]);const z=[{label:"Choose Option",value:""},{label:"TLS",value:"tls"},{label:"SSL",value:"ssl"}];return h(pt,{children:[e(We,{fullWidth:!0,title:"Settings",children:e("div",{children:h(Q,{children:[e("div",{children:h(Q.Section,{children:[e(U,{sectioned:!0,children:h("div",{className:`${k.ipsContactusSubmissions} ${M==="smtp"?k.ipsTabActive:""}`,onClick:()=>E("smtp"),children:[e("div",{style:{marginRight:4},children:e(O,{source:X.settingFile})}),e(q,{children:"SMTP Settings"})]})}),ee({name:C==null?void 0:C.subscriptionName})?e(U,{sectioned:!0,children:h("div",{className:`${k.ipsContactusSubmissions} ${M==="recaptcha"?k.ipsTabActive:""}`,onClick:()=>E("recaptcha"),children:[e("div",{style:{marginRight:4},children:e(O,{source:X.settingFile})}),e(q,{children:"reCaptcha Settings"})]})}):null]})}),e(Q.Section,{children:M==="smtp"?e("div",{className:k.ipsContactusFormLayoutContainer,children:h(U,{sectioned:!0,children:[e(se,{onSubmit:s=>V(s),noValidate:!0,children:e(oe,{children:h(T,{children:[e(T.Cell,{columnSpan:{xs:6,sm:6,md:12,lg:12},children:e(w,{id:"smtpName",name:"smtpName",value:n.smtpName||"",onChange:s=>B("smtpName",s),label:"SMTP",type:"text",autoComplete:"off",error:P.smtpName})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:6,lg:6},children:e(w,{value:n.email||"",name:"email",onChange:s=>B("email",s),label:"Username/Email address",type:"text",autoComplete:"off",error:P.email})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:6,lg:6},children:e(w,{value:n.password||"",name:"password",onChange:s=>B("password",s),label:"Password/App password",type:"password",autoComplete:"off",error:P.password})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:6,lg:6},children:e(ze,{label:"Mail encryption",name:"mail_encryption",options:z,onChange:s=>B("mail_encryption",s),value:n.mail_encryption||"",error:P.mail_encryption})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:6,lg:6},children:e(w,{value:n.port||"",name:"port",onChange:s=>B("port",s),label:"Port",type:"text",autoComplete:"off",error:P.port})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:12,lg:12},children:e(H,{submit:!0,primary:!0,loading:d==null?void 0:d.loading,children:`${y||d!=null&&d.isEdit?"Update":"Save"}`})})]})})}),e(te,{})]})}):M==="recaptcha"&&ee({name:(C==null?void 0:C.subscriptionName)||(($=C==null?void 0:C.subscription)==null?void 0:$.subscriptionName)})?e("div",{className:k.ipsContactusFormLayoutContainer,children:h(U,{sectioned:!0,children:[e(se,{onSubmit:s=>K(s),children:h(oe,{children:[h("div",{className:k.recaptchaHeadingContainer,children:[e(q,{children:"Google reCaptcha type v2"})," ",e("div",{onMouseEnter:g,className:k.ipsAPISupportIcon,children:e(O,{source:X.support,color:"base"})})]}),h(T,{children:[e(T.Cell,{columnSpan:{xs:6,sm:6,md:12,lg:12},children:e(w,{id:"siteKey",name:"siteKey",value:(i==null?void 0:i.siteKey)||"",onChange:s=>L("siteKey",s),label:"Site Key",type:"text",autoComplete:"off"})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:12,lg:12},children:e(w,{id:"secretKey",name:"secretKey",value:(i==null?void 0:i.secretKey)||"",onChange:s=>L("secretKey",s),label:"Secret Key",type:"text",autoComplete:"off"})}),e(T.Cell,{columnSpan:{xs:6,sm:6,md:12,lg:12},children:e(H,{submit:!0,primary:!0,children:"Save"})})]})]})}),e(te,{})]})}):null})]})})}),t&&e(Ct,{open:t,handleClose:u,src:"https://www.contactformtoapi.com/shopify-app-documentation/",title:"Recaptcha settings",width:"1000",height:"1000"})]})}export{Rt as default};
