import{u as B,bf as D,b as c,d as h,h as O,bE as U,i as d,j as o,V as P,N as y,P as V,F,v as W,l as $,bF as q}from"./index-a7d8285a.js";import{h as z}from"./moment-a9aaa855.js";import{C as G}from"./index-282207c4.js";import{u as H,I as s}from"./IndexTable-0e14dad0.js";import{E as J}from"./SelectAllActions-7723543d.js";import"./set-root-property-5afc98ee.js";import"./Checkbox-61ccab64.js";import"./InlineError-95e8c5a5.js";import"./TickSmallMinor.svg-14eb6703.js";function ne(){var C,g;const i=B(),p=D(),[f,a]=c.useState(!1),[v,N]=c.useState(null),r=h(e=>{var l;return(l=e==null?void 0:e.shopId)==null?void 0:l.shopId}),t=h(e=>{var l;return(l=e==null?void 0:e.anyAPISetting)==null?void 0:l.allApiSettingData}),u=h(e=>{var l,n;return(n=(l=e==null?void 0:e.inputField)==null?void 0:l.finalFormData)==null?void 0:n.formData}),x={singular:"apiList",plural:"apiLists"},{selectedResources:I,allResourcesSelected:b,handleSelectionChange:k}=H(t==null?void 0:t.data);c.useEffect(()=>{i(O(r)),i(U(r))},[i,r]);function L(e){var n;const l=u==null?void 0:u.find(m=>m._id===e);return l?(n=l==null?void 0:l.customForm[0])==null?void 0:n.formTitle:"Form not found"}const R=()=>{p("/add-api")},S=e=>{N(e),a(!0)},w=c.useCallback(()=>{a(!1)},[]),E=()=>{i(q({deleteLogArr:v,shopId:r})),a(!1)},M=(t==null?void 0:t.data)&&((C=t==null?void 0:t.data)==null?void 0:C.map(({_id:e,apiTitle:l,apiUrl:n,createdAt:m,form:T},Y)=>d(s.Row,{id:e,selected:I.includes(e),position:Y,children:[o(s.Cell,{children:L(T)}),o(s.Cell,{children:l}),o(s.Cell,{children:n}),o(s.Cell,{children:z(m).format("YYYY-MM-DD")}),o(s.Cell,{children:d("div",{style:{display:"flex",justifyContent:"center"},children:[o("div",{style:{marginRight:"12px"},children:o(P,{plain:!0,icon:y.edit,onClick:()=>p(`/edit-api/${e}`)})}),o("div",{children:o(P,{plain:!0,icon:y.delete,onClick:()=>S(e)})})]})})]},e))),A=!r||(t==null?void 0:t.loading),j=o(F,{children:A?null:o(J,{title:"No APIs found",withIllustration:!0})});return d(V,{fullWidth:!0,title:"Contact Form with API List",primaryAction:{content:"Add New API",onAction:()=>R()},children:[d(F,{children:[o(W,{children:o(s,{resourceName:x,loading:A,itemCount:((g=t==null?void 0:t.data)==null?void 0:g.length)||0,emptyState:j,selectedItemsCount:b?"All":I.length,onSelectionChange:k,selectable:!1,headings:[{title:"Form Name"},{title:"API Name"},{title:"API URL"},{title:"Created Date"},{title:"Action",alignment:"center"}],children:M})}),o($,{})]}),f&&o(G,{active:f,handleClose:w,handleDelete:E,title:"Are you sure to delete selected API data?",description:"<p><strong>Note:</strong> Deleting this API will also remove the logs created for this API</p>"})]})}export{ne as default};
