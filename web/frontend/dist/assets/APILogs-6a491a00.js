import{b as a,c as w,u as B,d as c,h as O,bC as V,i as f,j as l,X as z,P as J,F as m,v as U,V as W}from"./index-c3d5bec4.js";import{h as X}from"./moment-a9aaa855.js";import{u as q,I as t}from"./IndexTable-609c1706.js";import{E as G}from"./SelectAllActions-1037046a.js";import"./set-root-property-5afc98ee.js";import"./Checkbox-f34f3496.js";import"./InlineError-24c0ced4.js";import"./TickSmallMinor.svg-a3bf83b5.js";const H=a.lazy(()=>w(()=>import("./ModalLogs-0de94782.js"),["assets/ModalLogs-0de94782.js","assets/index-c3d5bec4.js","assets/index-ac84de1a.css","assets/ExceptionList-83f82079.js","assets/moment-a9aaa855.js","assets/IndexTable-609c1706.js","assets/set-root-property-5afc98ee.js","assets/Checkbox-f34f3496.js","assets/InlineError-24c0ced4.js","assets/TickSmallMinor.svg-a3bf83b5.js","assets/SelectAllActions-1037046a.js"])),ln=()=>{var N,A;const i=B(),[g,I]=a.useState(!1),[P,y]=a.useState({}),d=c(n=>{var o;return(o=n==null?void 0:n.shopId)==null?void 0:o.shopId}),v=c(n=>{var o,r;return(r=(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiLogsData)==null?void 0:r.data}),M=c(n=>{var o,r;return(r=(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiLogsData)==null?void 0:r.total_count}),x=10,[s,E]=a.useState(1),e=c(n=>{var o;return(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiLogsData}),u=c(n=>{var o,r;return(r=(o=n==null?void 0:n.inputField)==null?void 0:o.finalFormData)==null?void 0:r.formData}),h=c(n=>{var o;return(o=n==null?void 0:n.anyAPISetting)==null?void 0:o.allApiSettingData}),F={singular:"log",plural:"logs"},{selectedResources:S,allResourcesSelected:L,handleSelectionChange:T}=q(e==null?void 0:e.data);a.useEffect(()=>{i(O(d))},[i,d]),a.useEffect(()=>{i(V({shopId:d,page:s,per_page:x}))},[i,s,d]);function C(n){var r;const o=u==null?void 0:u.find(p=>p._id===n);return o?(r=o==null?void 0:o.customForm[0])==null?void 0:r.formTitle:"Form not found"}function _(n){var r;const o=(r=h==null?void 0:h.data)==null?void 0:r.find(p=>p._id===n);return o?o==null?void 0:o.apiTitle:"API Title not found"}const b=n=>{y(n),I(!0)},R=a.useCallback(()=>{I(!1),y({})},[]),D=async()=>{E(s+1)},k=!d||(e==null?void 0:e.loading),Y=l(m,{children:k?null:l(G,{title:"No logs found",description:"Try changing the filters or search term",withIllustration:!0})}),j=(e==null?void 0:e.data)&&((N=e==null?void 0:e.data)==null?void 0:N.map((n,o)=>f(t.Row,{id:n==null?void 0:n._id,selected:S.includes(n==null?void 0:n._id),onClick:()=>b(n),position:o,children:[l(t.Cell,{children:l("a",{className:"Polaris-Link Polaris-Link--monochrome Polaris-Link--removeUnderline",href:"#","data-primary-link":!0,"data-polaris-unstyled":!0,children:l(z,{variation:"strong",children:C(n==null?void 0:n.formId)})})}),l(t.Cell,{children:_(n==null?void 0:n.apiId)}),l(t.Cell,{className:"ips-custom-cell",children:JSON.stringify(n==null?void 0:n.log)}),l(t.Cell,{children:X(n==null?void 0:n.createdAt).format("YYYY-MM-DD")})]},n==null?void 0:n._id)));return f(J,{fullWidth:!0,title:"Logs",children:[l(m,{children:f(U,{children:[l(t,{resourceName:F,loading:k,itemCount:((A=e==null?void 0:e.data)==null?void 0:A.length)||0,emptyState:Y,selectedItemsCount:L?"All":S.length,onSelectionChange:T,selectable:!1,headings:[{title:"Form Name"},{title:"API Name"},{title:"Log"},{title:"Created Date"}],children:j}),v.length<M?l("div",{className:"ips-pagination_button",children:l(W,{primary:!0,onClick:D,children:"Load More"})}):null]})}),g&&l(H,{item:P&&P,open:g,formData:u,handleClose:R,findAPINameById:_,findFormNameById:C})]})};export{ln as default};
