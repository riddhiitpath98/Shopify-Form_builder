import{a as d,aK as ut,j as e,H as Ae,ai as ee,J as N,aL as me,aM as ge,at as dt,O as We,aN as pt,aO as ht,e as A,aP as Le,X as be,aQ as ft,aR as ye,aS as St,as as mt,aT as gt,a0 as Lt,aU as bt,F as Rt,aV as kt,aW as Pt}from"./index-885978b8.js";import{S as At}from"./Select-6d584da8.js";import{i as ae}from"./index-5bc7bc63.js";import{B as Wt}from"./Bleed-ed4f71d1.js";import{C as yt}from"./Checkbox-c617239d.js";import{u as _t,S as vt,C as xt,a as It,E as Ct,B as Mt}from"./SelectAllActions-1ff4a4a3.js";const _e=d.createContext({});var m={ResourceItem:"Polaris-ResourceItem",Actions:"Polaris-ResourceItem__Actions",ItemWrapper:"Polaris-ResourceItem__ItemWrapper",focusedInner:"Polaris-ResourceItem--focusedInner",focused:"Polaris-ResourceItem--focused",selected:"Polaris-ResourceItem--selected",Link:"Polaris-ResourceItem__Link",Button:"Polaris-ResourceItem__Button",selectable:"Polaris-ResourceItem--selectable",selectMode:"Polaris-ResourceItem--selectMode",ListItem:"Polaris-ResourceItem__ListItem"};const I="All",Nt=ye("ResourceListItemCheckbox"),Bt=ye("ResourceListItemOverlay");class Ht extends d.Component{constructor(...i){super(...i),this.state={actionsMenuVisible:!1,focused:!1,focusedInner:!1,selected:Re(this.props.id,this.props.context.selectedItems)},this.node=null,this.checkboxId=Nt(),this.overlayId=Bt(),this.buttonOverlay=d.createRef(),this.setNode=r=>{this.node=r},this.handleFocus=r=>{r.target===this.buttonOverlay.current||this.node&&r.target===this.node.querySelector(`#${this.overlayId}`)?this.setState({focused:!0,focusedInner:!1}):this.node&&this.node.contains(r.target)&&this.setState({focused:!0,focusedInner:!0})},this.handleBlur=({relatedTarget:r})=>{this.node&&r instanceof Element&&this.node.contains(r)||this.setState({focused:!1,focusedInner:!1})},this.handleMouseOut=()=>{this.state.focused&&this.setState({focused:!1,focusedInner:!1})},this.handleLargerSelectionArea=r=>{z(r),this.handleSelection(!this.state.selected,r.nativeEvent.shiftKey)},this.handleSelection=(r,p)=>{const{id:f,sortOrder:u,context:{onSelectionChange:g}}=this.props;f==null||g==null||(this.setState({focused:r,focusedInner:r}),g(r,f,u,p))},this.handleClick=r=>{z(r);const{id:p,onClick:f,url:u,context:{selectMode:g}}=this.props,{ctrlKey:L,metaKey:a}=r.nativeEvent,b=this.node&&this.node.querySelector("a");if(g){this.handleLargerSelectionArea(r);return}if(b!==r.target){if(f&&f(p),u&&(L||a)){window.open(u,"_blank");return}u&&b&&b.click()}},this.handleKeyUp=r=>{const{onClick:p=Et,context:{selectMode:f}}=this.props,{key:u}=r;u==="Enter"&&this.props.url&&!f&&p()},this.handleActionsClick=()=>{this.setState(({actionsMenuVisible:r})=>({actionsMenuVisible:!r}))},this.handleCloseRequest=()=>{this.setState({actionsMenuVisible:!1})}}static getDerivedStateFromProps(i,r){const p=Re(i.id,i.context.selectedItems);return r.selected===p?null:{selected:p}}shouldComponentUpdate(i,r){const{children:p,context:{selectedItems:f,...u},...g}=i,{children:L,context:{selectedItems:a,...b},...C}=this.props,W=i.context.selectMode;return!ae(this.state,r)||this.props.context.selectMode!==W||!i.context.selectMode&&(!ae(C,g)||!ae(b,u))}render(){const{children:i,url:r,external:p,media:f,shortcutActions:u,ariaControls:g,ariaExpanded:L,persistActions:a=!1,accessibilityLabel:b,name:C,context:{selectable:W,selectMode:o,hasBulkActions:G,loading:O,resourceName:B},i18n:D,verticalAlignment:y,dataHref:M,breakpoints:R}=this.props,{actionsMenuVisible:k,focused:V,focusedInner:H,selected:U}=this.state;let c=null,h=null;if(W){const x=C||b||D.translate("Polaris.Common.checkbox");h=e("div",{onClick:this.handleLargerSelectionArea,children:e(Wt,{marginBlock:"2",marginInline:"3",children:e(ee,{zIndex:"var(--pc-resource-item-content-stacking-order)",paddingInlineStart:"3",paddingInlineEnd:"3",paddingBlockStart:"3",paddingBlockEnd:"2",children:e("div",{onClick:z,children:e("div",{onChange:this.handleLargerSelectionArea,children:e(yt,{id:this.checkboxId,label:x,labelHidden:!0,checked:U,disabled:O})})})})})})}(f||W)&&(c=A(be,{gap:"4",blockAlign:f&&W?"center":ke(y),children:[h,f]}));const q=N(m.ResourceItem,V&&m.focused,W&&m.selectable,U&&m.selected,o&&m.selectMode,a&&m.persistActions,H&&m.focusedInner),$=N(m.ListItem,V&&!H&&m.focused,G&&m.hasBulkActions);let K=null,X=null;if(u&&!O)if(a){K=R!=null&&R.lgUp?e("div",{className:m.Actions,onClick:z,children:e(me,{children:ge(u,{plain:!0})})}):null;const x=C?D.translate("Polaris.ResourceList.Item.actionsDropdownLabel",{accessibilityLabel:C}):D.translate("Polaris.ResourceList.Item.actionsDropdown");X=!o&&R!==null&&R!==void 0&&R.lgDown?e("div",{onClick:z,children:e(dt,{activator:e(We,{accessibilityLabel:x,onClick:this.handleActionsClick,plain:!0,icon:pt}),onClose:this.handleCloseRequest,active:k,children:e(ht,{items:u})})}):null}else R!=null&&R.lgUp&&(K=e("div",{className:m.Actions,onClick:z,children:e(ee,{position:"absolute",insetBlockStart:"4",insetInlineEnd:"5",children:e(me,{segmented:!0,children:ge(u,{size:"slim"})})})}));const te=e(ee,{id:this.props.id,position:"relative",padding:"3",paddingInlineStart:{xs:"4",sm:"5"},paddingInlineEnd:{xs:"4",sm:"5"},zIndex:"var(--pc-resource-item-content-stacking-order)",children:A(Le,{columns:{xs:"1fr auto"},children:[A(Le,{columns:{xs:f||W?"auto 1fr":"1fr"},gap:"5",children:[c,e(be,{gap:"4",blockAlign:ke(y),children:e(ee,{width:"100%",padding:"0",paddingInlineStart:"0",paddingInlineEnd:"0",children:i})})]}),K,X]})}),E=O?-1:0,J=b||D.translate("Polaris.ResourceList.Item.viewItem",{itemName:C||B&&B.singular||""}),Q=r?e(ft,{"aria-describedby":this.props.id,"aria-label":J,className:m.Link,url:r,external:p,tabIndex:E,id:this.overlayId}):e("button",{className:m.Button,"aria-label":J,"aria-controls":g,"aria-expanded":L,onClick:this.handleClick,tabIndex:E,ref:this.buttonOverlay});return e("li",{className:$,"data-href":M,children:e("div",{className:m.ItemWrapper,children:A("div",{ref:this.setNode,className:q,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,onMouseOut:this.handleMouseOut,"data-href":r,children:[Q,te]})})})}}function Et(){}function z(s){s.stopPropagation()}function Re(s,i){return!!(i&&(Array.isArray(i)&&i.includes(s)||i===I))}function wt(s){const i=ut();return e(Ht,{...Object.assign({},s,{breakpoints:i,context:d.useContext(_e),i18n:Ae()})})}function ke(s){switch(s){case"leading":return"start";case"trailing":return"end";case"center":return"center";case"fill":return"stretch";case"baseline":return"baseline";default:return"start"}}var n={FiltersWrapper:"Polaris-ResourceList__FiltersWrapper",ResourceList:"Polaris-ResourceList",HeaderOuterWrapper:"Polaris-ResourceList__HeaderOuterWrapper","HeaderWrapper-disabled":"Polaris-ResourceList__HeaderWrapper--disabled","HeaderWrapper-overlay":"Polaris-ResourceList__HeaderWrapper--overlay",HeaderWrapper:"Polaris-ResourceList__HeaderWrapper","HeaderWrapper-isSticky":"Polaris-ResourceList__HeaderWrapper--isSticky",HeaderContentWrapper:"Polaris-ResourceList__HeaderContentWrapper","HeaderWrapper-inSelectMode":"Polaris-ResourceList__HeaderWrapper--inSelectMode",SortWrapper:"Polaris-ResourceList__SortWrapper",AlternateToolWrapper:"Polaris-ResourceList__AlternateToolWrapper","HeaderWrapper-hasSelect":"Polaris-ResourceList__HeaderWrapper--hasSelect","HeaderWrapper-hasAlternateTool":"Polaris-ResourceList__HeaderWrapper--hasAlternateTool","HeaderWrapper-hasSort":"Polaris-ResourceList__HeaderWrapper--hasSort",HeaderTitleWrapper:"Polaris-ResourceList__HeaderTitleWrapper",BulkActionsWrapper:"Polaris-ResourceList__BulkActionsWrapper",BulkActionsWrapperSticky:"Polaris-ResourceList__BulkActionsWrapperSticky",SelectAllActionsWrapper:"Polaris-ResourceList__SelectAllActionsWrapper",CheckableButtonWrapper:"Polaris-ResourceList__CheckableButtonWrapper",SelectButtonWrapper:"Polaris-ResourceList__SelectButtonWrapper",EmptySearchResultWrapper:"Polaris-ResourceList__EmptySearchResultWrapper",ResourceListWrapper:"Polaris-ResourceList__ResourceListWrapper",ResourceListWrapperWithBulkActions:"Polaris-ResourceList__ResourceListWrapperWithBulkActions",ItemWrapper:"Polaris-ResourceList__ItemWrapper","ItemWrapper-isLoading":"Polaris-ResourceList__ItemWrapper--isLoading",SpinnerContainer:"Polaris-ResourceList__SpinnerContainer",LoadingOverlay:"Polaris-ResourceList__LoadingOverlay",DisabledPointerEvents:"Polaris-ResourceList__DisabledPointerEvents",disableTextSelection:"Polaris-ResourceList--disableTextSelection"};const Tt=28,Ot=45;function Pe(s,i){return s.map((r,p)=>i(r,p))}const j=()=>{var s;return typeof window>"u"?!1:window.innerWidth<parseFloat((s=bt(Pt.breakpoints["breakpoints-sm"]))!==null&&s!==void 0?s:"")};function Dt(s,i){return Object.prototype.hasOwnProperty.call(s,"id")?s.id:i.toString()}function Ft({items:s,filterControl:i,flushFilters:r,emptyState:p,emptySearchState:f,resourceName:u,promotedBulkActions:g,bulkActions:L,selectedItems:a=[],isFiltered:b,selectable:C,hasMoreItems:W,loading:o,headerContent:G,showHeader:O,totalItemsCount:B,sortValue:D,sortOptions:y,alternateTool:M,onSortChange:R,onSelectionChange:k,renderItem:V,idForItem:H=Dt,resolveItemId:U}){const c=Ae(),[h,q]=d.useState(!!(a&&a.length>0)),[$,K]=d.useState(0),[X,te]=d.useState(),[E,J]=d.useState(j()),Q=d.useReducer((t=0)=>t+1,0)[1],x=d.useRef(null),{bulkActionsIntersectionRef:ve,tableMeasurerRef:xe,isBulkActionsSticky:Y,bulkActionsAbsoluteOffset:Ie,bulkActionsMaxWidth:ne,bulkActionsOffsetLeft:Ce,computeTableDimensions:le}=_t(h);d.useEffect(()=>{le()},[le,s.length]);const Me=St(()=>({singular:c.translate("Polaris.ResourceList.defaultItemSingular"),plural:c.translate("Polaris.ResourceList.defaultItemPlural")})),F=d.useRef(null),w=t=>{q(t),!t&&k&&k([])},Ne=mt(()=>{const t=j();a&&a.length===0&&h&&!t&&w(!1),E!==t&&J(t)},50,{leading:!0,trailing:!0,maxWait:50}),_=!!(g&&g.length>0||L&&L.length>0||C)&&!E,Be=()=>{let t="indeterminate";return!a||Array.isArray(a)&&a.length===0?t=!1:(a===I||Array.isArray(a)&&a.length===s.length)&&(t=!0),t},v=u||Me.current,ie=()=>{const t=s.length,l=!o&&(!B&&t===1||B===1)?v.singular:v.plural;return o?c.translate("Polaris.ResourceList.loading",{resource:l}):B?c.translate("Polaris.ResourceList.showingTotalCount",{itemsCount:t,totalItemsCount:B,resource:l}):G||c.translate("Polaris.ResourceList.showing",{itemsCount:t,resource:l})},He=()=>{const t=a===I?`${s.length}+`:a.length;return c.translate("Polaris.ResourceList.selected",{selectedItemsCount:t})},oe=()=>{const t=a.length,l=s.length,S=t===l;return l===1&&S?c.translate("Polaris.ResourceList.a11yCheckboxDeselectAllSingle",{resourceNameSingular:v.singular}):l===1?c.translate("Polaris.ResourceList.a11yCheckboxSelectAllSingle",{resourceNameSingular:v.singular}):S?c.translate("Polaris.ResourceList.a11yCheckboxDeselectAllMultiple",{itemsLength:s.length,resourceNamePlural:v.plural}):c.translate("Polaris.ResourceList.a11yCheckboxSelectAllMultiple",{itemsLength:s.length,resourceNamePlural:v.plural})},Ee=()=>{if(!(!_||!W)&&a===I)return c.translate(b?"Polaris.ResourceList.allFilteredItemsSelected":"Polaris.ResourceList.allItemsSelected",{itemsLength:s.length,resourceNamePlural:v.plural})},we=()=>!_||!W?void 0:{content:a===I?c.translate("Polaris.Common.undo"):c.translate(b?"Polaris.ResourceList.selectAllFilteredItems":"Polaris.ResourceList.selectAllItems",{itemsLength:s.length,resourceNamePlural:v.plural}),onAction:Oe},Te={title:c.translate("Polaris.ResourceList.emptySearchResultTitle",{resourceNamePlural:v.plural}),description:c.translate("Polaris.ResourceList.emptySearchResultDescription")},Oe=()=>{const t=a===I?Pe(s,H):I;k&&k(t)},ce=d.useCallback(()=>{if(F.current!=null){if(typeof window>"u")return;const t=F.current.getBoundingClientRect(),l=Math.max(document.documentElement?document.documentElement.clientHeight:0,window.innerHeight||0),S=l-t.height,T=s.length===1?Tt:Ot,P=S>0?(t.height-T)/2:(l-t.top-T)/2;K(P)}},[F,s.length]),Z=s.length>0;d.useEffect(()=>{o&&ce()},[o,ce]),d.useEffect(()=>{a&&a.length>0&&!h&&q(!0),(!a||a.length===0)&&!j()&&q(!1)},[a,h]),d.useEffect(()=>{Q()},[Q,s]);const De=(t,l)=>{const S=H(t,l);return V(t,S,l)},Fe=(t,l,S)=>{const T=Math.min(t,l),P=Math.max(t,l);return s.slice(T,P+1).map(S)},ze=(t,l,S,T)=>{if(a==null||k==null)return;let P=a===I?Pe(s,H):[...a];S!==void 0&&te(S);const Se=X;let re=[l];if(T&&Se!=null&&S!==void 0&&U&&(re=Fe(Se,S,U)),P=[...new Set([...P,...re])],!t)for(const ct of re)P.splice(P.indexOf(ct),1);P.length===0&&!j()?w(!1):P.length>0&&w(!0),k&&k(P)},ue=()=>{let t;Array.isArray(a)&&a.length===s.length||a===I?t=[]:t=s.map((l,S)=>H(l,S)),t.length===0&&!j()?w(!1):t.length>0&&w(!0),k&&k(t),setTimeout(()=>{var l;x==null||(l=x.current)===null||l===void 0||l.focus()},0)},Ue=_?e("div",{className:n.SelectAllActionsWrapper,children:e(vt,{label:He(),accessibilityLabel:oe(),selected:Be(),onToggleAll:ue,selectMode:h,paginatedSelectAllAction:we(),paginatedSelectAllText:Ee(),disabled:o,ref:x})}):null,qe=N(n.BulkActionsWrapper,Y&&n.BulkActionsWrapperSticky),de=_&&h&&(L||g)?e("div",{className:qe,style:{top:Y?void 0:Ie,width:ne,left:Y?Ce:void 0},children:e(Mt,{selectMode:h,onSelectModeToggle:w,promotedActions:g,actions:L,disabled:o,isSticky:Y,width:ne})}):null,Ke=i?e("div",{className:N(!r&&n.FiltersWrapper),children:i}):null,pe=y&&y.length>0&&!M?e("div",{className:n.SortWrapper,children:e(At,{label:c.translate("Polaris.ResourceList.sortingLabel"),labelInline:!E,labelHidden:E,options:y,onChange:R,value:D,disabled:h})}):null,je=M&&!pe?e("div",{className:n.AlternateToolWrapper,children:M}):null,Ge=e("div",{className:n.HeaderTitleWrapper,children:ie()}),Ve=_?e("div",{className:n.SelectButtonWrapper,children:e(We,{disabled:h,icon:gt,onClick:()=>w(!0),children:c.translate("Polaris.ResourceList.selectButtonText")})}):null,$e=_?e("div",{className:n.CheckableButtonWrapper,children:e(xt,{accessibilityLabel:oe(),label:ie(),onToggleAll:ue,disabled:o,ref:x})}):null,Xe=_||y&&y.length>0||M,Je=o?e("div",{className:n["HeaderWrapper-overlay"]}):null,se=p&&!Z&&!o,he=!se&&i&&!Z&&!o,Qe=!se&&O!==!1&&!he&&(O||Xe)&&F.current&&A("div",{className:n.HeaderOuterWrapper,children:[e(It,{boundingElement:F.current,children:t=>{const l=N(n.HeaderWrapper,y&&y.length>0&&!M&&n["HeaderWrapper-hasSort"],M&&n["HeaderWrapper-hasAlternateTool"],_&&n["HeaderWrapper-hasSelect"],o&&n["HeaderWrapper-disabled"],_&&h&&n["HeaderWrapper-inSelectMode"],t&&n["HeaderWrapper-isSticky"]);return A("div",{className:l,children:[Je,A("div",{className:n.HeaderContentWrapper,children:[Ge,$e,je,pe,Ve]}),Ue]})}}),de]}),Ye=he?f||e("div",{className:n.EmptySearchResultWrapper,children:e(Ct,{...Object.assign({},Te,{withIllustration:!0})})}):null,Ze=se?p:null,et=8,tt={paddingTop:`${$>0?$:et}px`},st=s.length<2?"small":"large",fe=o?A(Rt,{children:[e("li",{className:n.SpinnerContainer,style:tt,children:e(kt,{size:st,accessibilityLabel:"Items are loading"})}),e("li",{className:n.LoadingOverlay})]}):null,rt=N(n.ItemWrapper,o&&n["ItemWrapper-isLoading"]),at=o&&!Z?e("div",{className:rt,tabIndex:-1,children:fe}):null,nt=N(n.ResourceList,o&&n.disabledPointerEvents,h&&n.disableTextSelection),lt=Z?A("ul",{className:nt,ref:F,"aria-live":"polite","aria-busy":o,children:[fe,d.Children.toArray(s.map(De))]}):null,it={selectable:_,selectedItems:a,selectMode:h,hasBulkActions:!!L,resourceName:v,loading:o,onSelectionChange:ze},ot=N(n.ResourceListWrapper,!!de&&h&&L&&n.ResourceListWrapperWithBulkActions);return A(_e.Provider,{value:it,children:[e(Lt,{event:"resize",handler:Ne}),A("div",{className:ot,ref:xe,children:[Ke,Qe,lt,Ye,Ze,at]}),e("div",{ref:ve})]})}Ft.Item=wt;export{_e as R,Ft as a,wt as b};
