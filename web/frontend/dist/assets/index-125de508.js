var nt=Object.defineProperty;var at=(i,e,t)=>e in i?nt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ie=(i,e,t)=>(at(i,typeof e!="symbol"?e+"":e,t),t);import{t as S,a as d,J as v,j as s,N as ot,as as lt,e as b,F as X,a0 as ct,O as D,at as dt,T as J,H as We,au as ut,I as xe,Y as Ie,a2 as je,av as Me,$ as ht,Z as pt,a4 as mt,a6 as Ft,aw as gt,a3 as ft,V as qe,W as Ue,a8 as Ct,ax as yt,ay as bt,az as Le,aA as vt,U as _t,aB as St,aC as E,_ as Ve,b as Z,aD as kt,u as Rt,aE as Oe,aF as Pt,aG as At,d as Bt,P as Tt,p as xt,S as It,k as Mt,aH as Y,aI as K,aJ as Nt}from"./index-02b1340d.js";import{h as Et}from"./moment-fbc5633a.js";import{R as Lt,a as Ot,b as Dt}from"./ResourceList-e4c028e9.js";import{S as $t}from"./Select-dc287e62.js";import{T as Ht}from"./TextField-2ed41e1b.js";import{C as De}from"./ChoiceList-0b3376d9.js";var wt=function(e){return S.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),S.createElement("path",{d:"M10 14a.997.997 0 0 1-.707-.293l-5-5a.999.999 0 1 1 1.414-1.414l4.293 4.293 4.293-4.293a.999.999 0 1 1 1.414 1.414l-5 5a.997.997 0 0 1-.707.293z"}))},Wt=function(e){return S.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),S.createElement("path",{d:"M15 13a.997.997 0 0 1-.707-.293l-4.293-4.293-4.293 4.293a.999.999 0 1 1-1.414-1.414l5-5a.999.999 0 0 1 1.414 0l5 5a.999.999 0 0 1-.707 1.707z"}))},jt=function(e){return S.createElement("svg",Object.assign({viewBox:"0 0 20 20"},e),S.createElement("path",{d:"M8 12a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm9.707 4.293-4.82-4.82a5.968 5.968 0 0 0 1.113-3.473 6 6 0 0 0-12 0 6 6 0 0 0 6 6 5.968 5.968 0 0 0 3.473-1.113l4.82 4.82a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414z"}))},Be={Collapsible:"Polaris-Collapsible",isFullyClosed:"Polaris-Collapsible--isFullyClosed",expandOnPrint:"Polaris-Collapsible--expandOnPrint"};function qt({id:i,expandOnPrint:e,open:t,transition:n=!0,preventMeasuringOnChildrenUpdate:a,children:u,onAnimationEnd:o}){const[m,p]=d.useState(0),[F,k]=d.useState(t),[I,_]=d.useState("idle"),R=d.useRef(null),$=I==="idle"&&t&&F,H=I==="idle"&&!t&&!F,w=e||!H?u:null,P=v(Be.Collapsible,H&&Be.isFullyClosed,e&&Be.expandOnPrint),U=Vt(n),g={...typeof n=="object"&&{transitionDuration:n.duration,transitionTimingFunction:n.timingFunction},maxHeight:$?"none":`${m}px`,overflow:$?"visible":"hidden"},C=d.useCallback(({target:A})=>{A===R.current&&(_("idle"),k(t),o&&o())},[o,t]),ee=d.useCallback(()=>{U?(k(t),_("idle"),t&&R.current?p(R.current.scrollHeight):p(0)):_("measuring")},[t,U]);return d.useEffect(()=>{t!==F&&ee()},[t,F]),d.useEffect(()=>{!t||!R.current||p(R.current.scrollHeight)},[]),d.useEffect(()=>{if(R.current)switch(I){case"idle":break;case"measuring":p(R.current.scrollHeight),_("animating");break;case"animating":p(t?R.current.scrollHeight:0)}},[I,t,F]),s("div",{id:i,style:g,ref:R,className:P,onTransitionEnd:C,"aria-hidden":!t,children:w})}const Ut=/^0(ms|s)$/;function Vt(i){if(typeof i=="boolean")return!i;const{duration:e}=i;return!!(e&&Ut.test(e.trim()))}var y={Filters:"Polaris-Filters",FiltersContainer:"Polaris-Filters__FiltersContainer",FiltersContainerHeader:"Polaris-Filters__FiltersContainerHeader",FiltersDesktopContainerContent:"Polaris-Filters__FiltersDesktopContainerContent",FiltersMobileContainerContent:"Polaris-Filters__FiltersMobileContainerContent",FiltersContainerFooter:"Polaris-Filters__FiltersContainerFooter",FiltersMobileContainerFooter:"Polaris-Filters__FiltersMobileContainerFooter",EmptyFooterState:"Polaris-Filters__EmptyFooterState",FilterTriggerContainer:"Polaris-Filters__FilterTriggerContainer",FilterTrigger:"Polaris-Filters__FilterTrigger",FilterTriggerTitle:"Polaris-Filters__FilterTriggerTitle",AppliedFilterBadgeContainer:"Polaris-Filters__AppliedFilterBadgeContainer",open:"Polaris-Filters--open",FilterTriggerLabelContainer:"Polaris-Filters__FilterTriggerLabelContainer",first:"Polaris-Filters--first",last:"Polaris-Filters--last",FilterNodeContainer:"Polaris-Filters__FilterNodeContainer",SearchIcon:"Polaris-Filters__SearchIcon",Backdrop:"Polaris-Filters__Backdrop",HelpText:"Polaris-Filters__HelpText",TagsContainer:"Polaris-Filters__TagsContainer"},M={ConnectedFilterControl:"Polaris-Filters-ConnectedFilterControl",CenterContainer:"Polaris-Filters-ConnectedFilterControl__CenterContainer",right:"Polaris-Filters-ConnectedFilterControl--right",Item:"Polaris-Filters-ConnectedFilterControl__Item","Item-focused":"Polaris-Filters-ConnectedFilterControl__Item--focused",ProxyButtonContainer:"Polaris-Filters-ConnectedFilterControl__ProxyButtonContainer",RightContainer:"Polaris-Filters-ConnectedFilterControl__RightContainer",MoreFiltersButtonContainer:"Polaris-Filters-ConnectedFilterControl__MoreFiltersButtonContainer",queryFieldHidden:"Polaris-Filters-ConnectedFilterControl--queryFieldHidden",RightContainerWithoutMoreFilters:"Polaris-Filters-ConnectedFilterControl__RightContainerWithoutMoreFilters",onlyButtonVisible:"Polaris-Filters-ConnectedFilterControl--onlyButtonVisible",Wrapper:"Polaris-Filters-ConnectedFilterControl__Wrapper",AuxiliaryContainer:"Polaris-Filters-ConnectedFilterControl__AuxiliaryContainer"};function Te({children:i}){const{value:e,setTrue:t,setFalse:n}=ot(!1),a=v(M.Item,e&&M["Item-focused"]);return S.createElement("div",{onBlur:n,onFocus:t,className:a},i)}const Qt=150;class zt extends d.Component{constructor(...e){super(...e),this.state={availableWidth:0,proxyButtonsWidth:{}},this.container=d.createRef(),this.proxyButtonContainer=d.createRef(),this.moreFiltersButtonContainer=d.createRef(),this.handleResize=lt(()=>{this.measureProxyButtons(),this.measureAvailableWidth()},40,{leading:!0,trailing:!0,maxWait:40})}componentDidMount(){this.handleResize()}render(){const{children:e,rightPopoverableActions:t,rightAction:n,auxiliary:a,forceShowMorefiltersButton:u=!0,queryFieldHidden:o}=this.props,m=t!=null?this.getActionsToRender(t):[],p=v(M.ConnectedFilterControl,t&&M.right),F=u||t&&t.length!==m.length,k=v(M.RightContainer,!F&&M.RightContainerWithoutMoreFilters,o&&M.queryFieldHidden),I=m.length>0?s("div",{className:k,children:this.popoverFrom(m)}):null,_=v(M.MoreFiltersButtonContainer,m.length===0&&M.onlyButtonVisible),R=n?s("div",{ref:this.moreFiltersButtonContainer,className:_,children:F&&s(Te,{children:n})}):null,$=t?s("div",{className:M.ProxyButtonContainer,ref:this.proxyButtonContainer,"aria-hidden":!0,children:t.map(w=>s("div",{"data-key":w.key,children:this.activatorButtonFrom(w,{proxy:!0})},w.key))}):null,H=a?s("div",{className:M.AuxiliaryContainer,children:a}):null;return b(X,{children:[$,b("div",{className:M.Wrapper,children:[b("div",{className:p,ref:this.container,children:[e?s("div",{className:M.CenterContainer,children:s(Te,{children:e})}):null,I,R,s(ct,{event:"resize",handler:this.handleResize})]}),H]})]})}measureProxyButtons(){if(this.proxyButtonContainer.current){const e={};this.proxyButtonContainer.current&&Array.from(this.proxyButtonContainer.current.children).forEach(n=>{const a=n.getBoundingClientRect().width+78,u=n instanceof HTMLElement&&n.dataset.key;u&&(e[u]=a)}),this.setState({proxyButtonsWidth:e})}}measureAvailableWidth(){if(this.container.current&&this.moreFiltersButtonContainer.current){const e=this.container.current.getBoundingClientRect().width,t=this.moreFiltersButtonContainer.current.getBoundingClientRect().width,n=0,a=this.props.queryFieldHidden?0:Qt,u=e-a-t-n;this.setState({availableWidth:u})}}getActionsToRender(e){let t=this.state.availableWidth;const n=[];for(let a=0;t>0&&a<e.length;a++){const u=e[a],o=this.state.proxyButtonsWidth[u.key];if(o<=t)n.push(u),t-=o;else break}return n}activatorButtonFrom(e,t){const n=t!=null&&t.proxy?void 0:`Activator-${e.key}`;return s(D,{onClick:e.onAction,disclosure:!0,disabled:this.props.disabled||e.disabled,id:n,children:e.content})}popoverFrom(e){return e.map(t=>s(Te,{children:s(dt,{active:t.popoverOpen,activator:this.activatorButtonFrom(t),onClose:t.onAction,preferredAlignment:"left",sectioned:!0,children:t.popoverContent})},t.key))}}function Yt({children:i,hidden:e}){return e?S.createElement(J,{as:"span",visuallyHidden:!0},i):S.createElement(S.Fragment,null,i)}var L={Tag:"Polaris-Tag",disabled:"Polaris-Tag--disabled",clickable:"Polaris-Tag--clickable",removable:"Polaris-Tag--removable",linkable:"Polaris-Tag--linkable",TagText:"Polaris-Tag__TagText",Button:"Polaris-Tag__Button",segmented:"Polaris-Tag--segmented",Link:"Polaris-Tag__Link",LinkText:"Polaris-Tag__LinkText"};function Kt({children:i,disabled:e=!1,onClick:t,onRemove:n,accessibilityLabel:a,url:u}){const o=We(),m=n&&u,p=v(L.Tag,e&&L.disabled,t&&L.clickable,n&&L.removable,u&&!e&&L.linkable,m&&L.segmented);if(t)return S.createElement("button",{type:"button",disabled:e,className:p,onClick:t},i);let F=a;F||(F=typeof i=="string"?i:void 0);const k=o.translate("Polaris.Tag.ariaLabel",{children:F||""}),I=n?S.createElement("button",{type:"button","aria-label":k,className:v(L.Button,m&&L.segmented),onClick:n,onMouseUp:ut,disabled:e},S.createElement(xe,{source:Ie})):null,_=u&&!e?S.createElement("a",{className:v(L.Link,m&&L.segmented),href:u},S.createElement("span",{title:F,className:L.LinkText},i)):S.createElement("span",{title:F,className:L.TagText},i);return S.createElement("span",{className:p},_,I)}var x={Sheet:"Polaris-Sheet",Container:"Polaris-Sheet__Container",Bottom:"Polaris-Sheet__Bottom",enterBottom:"Polaris-Sheet--enterBottom",enterBottomActive:"Polaris-Sheet--enterBottomActive",exitBottom:"Polaris-Sheet--exitBottom",exitBottomActive:"Polaris-Sheet--exitBottomActive",Right:"Polaris-Sheet__Right",enterRight:"Polaris-Sheet--enterRight",enterRightActive:"Polaris-Sheet--enterRightActive",exitRight:"Polaris-Sheet--exitRight",exitRightActive:"Polaris-Sheet--exitRightActive"};const Jt={enter:v(x.Bottom,x.enterBottom),enterActive:v(x.Bottom,x.enterBottomActive),exit:v(x.Bottom,x.exitBottom),exitActive:v(x.Bottom,x.exitBottomActive)},Gt={enter:v(x.Right,x.enterRight),enterActive:v(x.Right,x.enterRightActive),exit:v(x.Right,x.exitRight),exitActive:v(x.Right,x.exitRightActive)};function $e({children:i,open:e,onClose:t,onEntered:n,onExit:a,accessibilityLabel:u,activator:o}){const{isNavigationCollapsed:m}=je(),p=d.useRef(null),F=d.useRef(null),k=d.useCallback(()=>{t();const _=o&&He(o)?o&&o.current:F.current;_&&requestAnimationFrame(()=>Me(_))},[o,t]);d.useEffect(()=>{},[]);const I=o&&!He(o)?s("div",{ref:F,children:o}):null;return b(X,{children:[I,b(ht,{idPrefix:"sheet",children:[s(pt,{nodeRef:p,classNames:m?Jt:Gt,timeout:parseInt(mt["duration-300"],10),in:e,mountOnEnter:!0,unmountOnExit:!0,onEntered:n,onExit:a,children:s("div",{...Object.assign({className:x.Container},Ft.props,gt.props,{ref:p}),children:s(ft,{trapping:e,children:s("div",{role:"dialog","aria-modal":!0,tabIndex:-1,className:x.Sheet,"aria-label":u,children:i})})})}),s(qe,{keyCode:Ue.Escape,handler:k}),e&&s(Ct,{transparent:!0,onClick:k})]})]})}function He(i){return Object.prototype.hasOwnProperty.call(i,"current")}var W;(function(i){i.Filter="Filter",i.Shortcut="Shortcut"})(W||(W={}));class Qe extends d.Component{constructor(...e){super(...e),this.context=void 0,this.state={open:!1,readyForFocus:!1},this.moreFiltersButtonContainer=d.createRef(),this.moreFiltersDoneButtonContainer=d.createRef(),this.focusNode=d.createRef(),this.closeFilters=()=>{this.setState({open:!1},()=>{this.moreFiltersButtonContainer.current&&Me(this.moreFiltersButtonContainer.current,!1)})},this.toggleFilters=()=>{this.state.open===!0?this.closeFilters():this.openFilters()},this.setReadyForFocus=t=>()=>{this.setState({readyForFocus:t})},this.handleClearAll=()=>{this.props.onClearAll(),this.moreFiltersDoneButtonContainer.current&&Me(this.moreFiltersDoneButtonContainer.current,!1)}}render(){const{filters:e,queryValue:t,onQueryBlur:n,onQueryChange:a,onQueryFocus:u,focused:o,onClearAll:m,appliedFilters:p,onQueryClear:F,queryPlaceholder:k,children:I,disabled:_=!1,helpText:R,hideTags:$,hideQueryField:H,disableQueryField:w=!1,i18n:P,mediaQuery:{isNavigationCollapsed:U}}=this.props,{resourceName:l}=this.context,{open:g,readyForFocus:C}=this.state,ee=g?b(X,{children:[s(yt,{}),s("div",{className:y.Backdrop,onClick:this.closeFilters})]}):null,A=e.map((T,le)=>{const Q=this.state[`${T.key}${W.Filter}`]===!0,ve=Q?Wt:wt,_e=v(y.FilterTriggerContainer,Q&&y.open,le===0&&y.first,e.length!==1&&le===e.length-1&&y.last),ce=this.getAppliedFilterContent(T.key),Se=ce?s("div",{className:y.AppliedFilterBadgeContainer,children:s(St,{status:"new",children:ce})}):null,de=`${T.key}Collapsible`,ke=v(y.FilterTrigger);return b("div",{className:_e,children:[b("button",{onClick:()=>this.toggleFilter(T.key),className:ke,id:`${T.key}ToggleButton`,type:"button","aria-controls":de,"aria-expanded":Q,children:[b("div",{className:y.FilterTriggerLabelContainer,children:[s("h3",{className:y.FilterTriggerTitle,children:s(J,{as:"span",color:this.props.disabled||T.disabled?"subdued":void 0,children:T.label})}),s("span",{className:y.FilterTriggerIcon,children:s(xe,{source:ve,color:"base"})})]}),Se]}),s(qt,{id:de,open:Q,onAnimationEnd:this.setReadyForFocus(!0),children:s("div",{className:y.FilterNodeContainer,children:s(bt,{disabled:!Q||!C||!g,root:this.focusNode,children:this.generateFilterMarkup(T)})})})]},T.key)}),j=p?p.length:0,V=$&&j>0?P.translate("Polaris.Filters.moreFiltersWithCount",{count:j}):P.translate("Polaris.Filters.moreFilters"),B=e.length?s("div",{ref:this.moreFiltersButtonContainer,children:s(D,{onClick:this.toggleFilters,disabled:_,children:V})}):null,ne=l||{singular:P.translate("Polaris.ResourceList.defaultItemSingular"),plural:P.translate("Polaris.ResourceList.defaultItemPlural")},q=this.transformFilters(e),me=s(zt,{rightPopoverableActions:q,rightAction:B,auxiliary:I,disabled:_,forceShowMorefiltersButton:e.length>q.length,queryFieldHidden:H,children:H?null:s(Ht,{placeholder:k||P.translate("Polaris.Filters.filter",{resourceName:ne.plural}),onChange:a,onBlur:n,onFocus:u,value:t,focused:o,label:k||P.translate("Polaris.Filters.filter",{resourceName:ne.plural}),labelHidden:!0,prefix:s("span",{className:y.SearchIcon,children:s(xe,{source:jt})}),clearButton:!0,onClearButtonClick:F,disabled:_||w,autoComplete:"off"})}),ae=v(y.FiltersContainerHeader),O=b("div",{className:ae,children:[s(J,{variant:"headingLg",as:"h3",children:V}),s(D,{icon:Ie,plain:!0,accessibilityLabel:P.translate("Polaris.Filters.cancel"),onClick:this.closeFilters})]}),Fe=b("div",{className:ae,children:[s(D,{icon:Ie,plain:!0,accessibilityLabel:P.translate("Polaris.Filters.cancel"),onClick:this.closeFilters}),s(J,{variant:"headingLg",as:"h3",children:V}),s(D,{onClick:this.closeFilters,primary:!0,children:P.translate("Polaris.Filters.done")})]}),te=v(y.FiltersContainerFooter),ge=b("div",{className:te,children:[s(D,{onClick:this.handleClearAll,disabled:!this.hasAppliedFilters(),children:P.translate("Polaris.Filters.clearAllFilters")}),s("div",{ref:this.moreFiltersDoneButtonContainer,children:s(D,{onClick:this.closeFilters,primary:!0,children:P.translate("Polaris.Filters.done")})})]}),oe=s("div",{className:y.FiltersMobileContainerFooter,children:this.hasAppliedFilters()?s(D,{onClick:m,fullWidth:!0,children:P.translate("Polaris.Filters.clearAllFilters")}):s("div",{className:y.EmptyFooterState,children:s(J,{color:"subdued",as:"span",children:s("p",{children:P.translate("Polaris.Filters.noFiltersApplied")})})})}),fe=!p||p.length<1,Ce=$?null:s(Yt,{hidden:fe,children:s("div",{className:y.TagsContainer,"aria-live":"polite",children:(p||[]).map(T=>s(Kt,{onRemove:()=>{T.onRemove(T.key)},disabled:_,children:T.label},T.key))})}),re=v(y.FiltersMobileContainerContent),ye=v(y.FiltersDesktopContainerContent),G=U?b($e,{accessibilityLabel:V,open:g,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1),children:[Fe,b(Le,{className:re,shadow:!0,children:[A,oe]})]}):s($e,{accessibilityLabel:V,open:g,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1),children:b("div",{className:y.FiltersContainer,children:[O,s(Le,{className:ye,shadow:!0,children:A}),ge]})}),be=R?s("div",{id:"FiltersHelpText",className:y.HelpText,children:s(J,{color:"subdued",as:"span",children:R})}):null;return s(vt.Provider,{value:!0,children:b("div",{className:y.Filters,children:[me,G,Ce,be,ee,s(qe,{keyCode:Ue.Escape,handler:this.closeFilters})]})})}hasAppliedFilters(){const{appliedFilters:e,queryValue:t}=this.props;return!!(e&&e.length>0)||!!(t&&t!=="")}getAppliedFilterContent(e){const{appliedFilters:t}=this.props;if(!t)return;const n=t.find(a=>a.key===e);return n==null?void 0:n.label}getAppliedFilterRemoveHandler(e){const{appliedFilters:t}=this.props;if(!t)return;const n=t.find(a=>a.key===e);return n==null?void 0:n.onRemove}openFilters(){this.setState({open:!0})}toggleFilter(e){this.state[`${e}${W.Filter}`]===!0?this.setState({readyForFocus:!1,[`${e}${W.Filter}`]:!1}):this.setState({readyForFocus:!1,[`${e}${W.Filter}`]:!0})}openFilterShortcut(e){this.setState({[`${e}${W.Shortcut}`]:!0})}closeFilterShortcut(e){this.setState({[`${e}${W.Shortcut}`]:!1})}toggleFilterShortcut(e){this.state[`${e}${W.Shortcut}`]===!0?this.closeFilterShortcut(e):this.openFilterShortcut(e)}transformFilters(e){const t=[];return Zt(e).forEach(n=>{const{key:a,label:u,disabled:o}=n;t.push({popoverContent:this.generateFilterMarkup(n),popoverOpen:!!this.state[`${a}${W.Shortcut}`],key:a,content:u,disabled:o,onAction:()=>this.toggleFilterShortcut(a)})}),t}generateFilterMarkup(e){const t=this.props.i18n,n=this.getAppliedFilterRemoveHandler(e.key),a=n==null?void 0:()=>{n(e.key)},u=!e.hideClearButton&&s(D,{plain:!0,disabled:a==null,onClick:a,accessibilityLabel:t.translate("Polaris.Filters.clearLabel",{filterName:e.label}),children:t.translate("Polaris.Filters.clear")});return s("div",{ref:this.focusNode,children:b(_t,{vertical:!0,spacing:"tight",children:[e.filter,u]})})}}Qe.contextType=Lt;function Zt(i){return i.filter(e=>e.shortcut===!0)}function Xt(i){const e=We(),t=je();return s(Qe,{...Object.assign({},i,{i18n:e,mediaQuery:t})})}const er=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ze=i=>Array.isArray(i)&&i.every(e=>typeof e=="object"&&!(e instanceof Array)),tr=i=>Array.isArray(i)&&i.every(e=>Array.isArray(e)),rr=i=>Array.from(i.map(e=>Object.keys(e)).reduce((e,t)=>new Set([...e,...t]),[])),sr=(i,e)=>{e=e||rr(i);let t=e,n=e;ze(e)&&(t=e.map(u=>u.label),n=e.map(u=>u.key));const a=i.map(u=>n.map(o=>ir(o,u)));return[t,...a]},ir=(i,e)=>{const t=i.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(n,a,u,o){const m=n[a];if(m==null)o.splice(1);else return m},e);return t===void 0?i in e?e[i]:"":t},nr=i=>typeof i>"u"||i===null?"":i,Ye=(i,e=",",t='"')=>i.filter(n=>n).map(n=>n.map(a=>nr(a)).map(a=>`${t}${a}${t}`).join(e)).join(`
`),ar=(i,e,t,n)=>Ye(e?[e,...i]:i,t,n),or=(i,e,t,n)=>Ye(sr(i,e),t,n),lr=(i,e,t,n)=>e?`${e.join(t)}
${i}`:i.replace(/"/g,'""'),Ke=(i,e,t,n)=>{if(ze(i))return or(i,e,t,n);if(tr(i))return ar(i,e,t,n);if(typeof i=="string")return lr(i,e,t);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},Je=(i,e,t,n,a)=>{const u=Ke(i,t,n,a),o=er()?"application/csv":"text/csv",m=new Blob([e?"\uFEFF":"",u],{type:o}),p=`data:${o};charset=utf-8,${e?"\uFEFF":""}${u}`,F=window.URL||window.webkitURL;return typeof F.createObjectURL>"u"?p:F.createObjectURL(m)},Ge={data:E.oneOfType([E.string,E.array,E.func]).isRequired,headers:E.array,target:E.string,separator:E.string,filename:E.string,uFEFF:E.bool,onClick:E.func,asyncOnClick:E.bool,enclosingCharacter:E.string},Ze={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},cr={target:"_blank"};class we extends S.Component{constructor(e){super(e),this.state={}}buildURI(){return Je(...arguments)}componentDidMount(){const{data:e,headers:t,separator:n,enclosingCharacter:a,uFEFF:u,target:o,specs:m,replace:p}=this.props;this.state.page=window.open(this.buildURI(e,u,t,n,a),o,m,p)}getWindow(){return this.state.page}render(){return null}}ie(we,"defaultProps",Object.assign(Ze,cr)),ie(we,"propTypes",Ge);var pe;let dr=(pe=class extends S.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return Je(...arguments)}handleLegacy(e,t=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:n,headers:a,separator:u,filename:o,enclosingCharacter:m,uFEFF:p}=this.props,F=t&&typeof n=="function"?n():n;let k=new Blob([p?"\uFEFF":"",Ke(F,a,u,m)]);return window.navigator.msSaveBlob(k,o),!1}}handleAsyncClick(e){const t=n=>{if(n===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,t)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:t,separator:n,filename:a,uFEFF:u,children:o,onClick:m,asyncOnClick:p,enclosingCharacter:F,...k}=this.props,_=typeof window>"u"?"":this.buildURI(e,u,t,n,F);return s("a",{download:a,...k,ref:R=>this.link=R,target:"_self",href:_,onClick:this.handleClick(),children:o})}},ie(pe,"defaultProps",Ze),ie(pe,"propTypes",Ge),pe);const ur=dr,hr="_ipsSubmissionModalHead_1tnr7_1",pr="_resourceItem_1tnr7_13",mr="_dateTimeItem_1tnr7_25",Fr="_isReadElement_1tnr7_33",gr="_ipsPaginationButton_1tnr7_39",he={ipsSubmissionModalHead:hr,resourceItem:pr,dateTimeItem:mr,isReadElement:Fr,ipsPaginationButton:gr};const fr=d.lazy(()=>Ve(()=>import("./index-d5a6afb9.js"),["assets/index-d5a6afb9.js","assets/index-02b1340d.js","assets/index-ac84de1a.css"])),Cr=d.lazy(()=>Ve(()=>import("./ModalSubmission-bbb7c9a6.js"),["assets/ModalSubmission-bbb7c9a6.js","assets/index-02b1340d.js","assets/index-ac84de1a.css","assets/ExceptionList-f77db72b.js","assets/moment-fbc5633a.js","assets/ResourceList-e4c028e9.js","assets/Select-dc287e62.js","assets/Labelled-34a75db8.js","assets/InlineError-dd1cf19e.js","assets/index-2f40279b.js","assets/Bleed-df36f0e3.js","assets/Checkbox-a846ffbb.js","assets/TickSmallMinor.svg-6f2d4179.js","assets/SelectAllActions-b000b260.js","assets/TextField-2ed41e1b.js","assets/ChoiceList-0b3376d9.js"]));function yr(){var Ne,Ee;const[i,e]=d.useState([]),[t,n]=d.useState("-createdAt"),[a,u]=d.useState([]),[o,m]=d.useState([]),[p,F]=d.useState(""),[k,I]=d.useState({}),[_,R]=d.useState([]),[$,H]=d.useState(!1),[w,P]=d.useState(!1),U=Z(r=>r.user.userData.user),l=kt(),g=Rt(),[C,ee]=d.useState(1),A=Z(r=>{var c;return(c=r==null?void 0:r.shopId)==null?void 0:c.shopId}),j=Z(r=>r.submission.submissionData.data),V=Z(r=>r.submission.submissionData.total_count),B=10,ne=Z(r=>r.submission.submissionData),q=Z(r=>{var c,h;return(h=(c=r==null?void 0:r.inputField)==null?void 0:c.finalFormData)==null?void 0:h.formData}),me=async()=>{ee(C+1)},ae=`export_submission_${new Date().toISOString().slice(0,10)}.csv`,O=d.useMemo(()=>j==null?void 0:j.filter((c,h)=>{const f=c==null?void 0:c.submission[0];if(f){const N=Object.entries(f);for(const[ue,z]of N)if(typeof z=="string"&&(z!=null&&z.toLowerCase().includes(p==null?void 0:p.toLowerCase())))return c}}),[j,p]);d.useMemo(()=>{let r={};const c=q.find(h=>{var f;return h._id===((f=l==null?void 0:l.state)==null?void 0:f.id)});return c&&(r.id=c._id,r.formTitle=c.customForm[0].formTitle,m([r.id])),r},[]);const Fe=d.useMemo(()=>{const r=[];if(O!=null&&O.length){let c={};O==null||O.map((h,f)=>{let N=h.submission[0];for(const ue in N){let z=ue.split("_").pop().toUpperCase(),se=N[ue];Array.isArray(se)&&(se=z==="FILE"?se.map(Ae=>Ae.name).join(", "):se.map(Ae=>Ae.value).join(", ")),c={...c,[z]:se}}r.push({No:f+1,...c})})}return r},[O]),te=d.useMemo(()=>{const r=[];return q==null||q.map(c=>{var h;(h=c==null?void 0:c.customForm)==null||h.forEach(f=>{f.formTitle&&r.push({id:c._id,title:f.formTitle})})}),r},[q.length]),ge=r=>{I(r),g(Oe({_id:r._id,isRead:!0})),H(!0)},oe=d.useCallback(()=>{H(!1),I({})},[]),fe=d.useCallback(r=>{g(Oe({_id:r,isRead:!1})),I({}),oe()},[]),Ce=r=>{var c,h,f,N;r&&r[0]==="read"?((c=l==null?void 0:l.state)!=null&&c.id?g(Y({filterFormId:(h=l==null?void 0:l.state)==null?void 0:h.id,path:t,query:{isRead:!0,formId:o,page:C,per_page:B}})):g(K({path:t,query:{isRead:!0,formId:o,page:C,per_page:B},shopId:A})),u(r)):r&&r[0]==="unread"&&((f=l==null?void 0:l.state)!=null&&f.id?g(Y({filterFormId:(N=l==null?void 0:l.state)==null?void 0:N.id,path:t,query:{isRead:!1,formId:o,page:C,per_page:B}})):g(K({path:t,query:{isRead:!1,formId:o,page:C,per_page:B},shopId:A})),u(r))},re=()=>{var r,c;(r=l==null?void 0:l.state)!=null&&r.id?g(Y({filterFormId:(c=l==null?void 0:l.state)==null?void 0:c.id,path:t,query:{isRead:"",formId:o,page:C,per_page:B}})):g(K({path:t,query:{isRead:"",formId:o,page:C,per_page:B},shopId:A})),u([])},ye=r=>{var c,h;r&&((c=l==null?void 0:l.state)!=null&&c.id?g(Y({filterFormId:(h=l==null?void 0:l.state)==null?void 0:h.id,path:t,query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:r,page:C,per_page:B}})):g(K({path:t,query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:r,page:C,per_page:B},shopId:A})),m(r))},G=()=>{var r,c;(r=l==null?void 0:l.state)!=null&&r.id?g(Y({filterFormId:(c=l==null?void 0:l.state)==null?void 0:c.id,path:t,query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:[],page:C,per_page:B}})):g(K({path:t,query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:[],page:C,per_page:B},shopId:A})),m([])},be=d.useCallback(r=>F(r),[]),T=d.useCallback(()=>F(""),[]),le=d.useCallback(()=>{re(),G(),T()},[T,re,G]),Q=r=>{let c=[];e(r),j.filter((h,f)=>r.filter((N,ue)=>f==N).length===1).map(h=>c.push(h==null?void 0:h._id)),R(c)};d.useEffect(()=>{var r,c;g((r=l.state)!=null&&r.id?Pt({order:t,id:(c=l.state)==null?void 0:c.id,page:C,per_page:B}):At({order:t,query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:o,page:C,per_page:B},shopId:A}))},[g,(Ne=l==null?void 0:l.state)==null?void 0:Ne.id,C,A]),d.useEffect(()=>{g(Bt(A))},[A]);const ve=()=>{P(!0)},_e=d.useCallback(()=>{P(!1)},[]),ce=()=>{var r;g(Nt({filterFormId:(r=l==null?void 0:l.state)==null?void 0:r.id,submissionIdArr:_,path:t,query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:o},shopId:A})),R([]),e([]),P(!1)},Se={singular:"submission",plural:"submissions"},de=[{label:"Newest",value:"-createdAt"},{label:"Oldest",value:"createdAt"}],ke=[{content:"Delete submissions",onAction:()=>{ve()}}],Xe=te.map(r=>({label:r.title,value:r.id})),et=[{key:"status",label:"Status",filter:s(De,{title:"Status",titleHidden:!0,choices:[{label:"Read",value:"read"},{label:"Unread",value:"unread"}],selected:a||[],onChange:Ce}),shortcut:!0},{key:"form",label:"Form",filter:s(De,{title:"Form",titleHidden:!0,choices:Xe,selected:o||[],onChange:ye,allowMultiple:!0}),shortcut:!0}],Re=[];if(o&&o.length>0){const r=o.map(c=>{const h=te.find(f=>f.id===c);return h?h.title:""});Re.push({key:"formStatus",label:`Form : ${r.join(", ")}`,onRemove:G})}const Pe=[];if(a&&!it(a)&&Pe.push({key:"status",label:`Status ${a}`,onRemove:re}),o&&o.length>0){const r=o.map(c=>{const h=te.find(f=>f.id===c);return h?h.title:""});Pe.push({key:"formStatus",label:`Form : ${r.join(", ")}`,onRemove:G})}const tt=r=>{var c,h,f,N;r==="createdAt"?((c=l==null?void 0:l.state)!=null&&c.id?g(Y({filterFormId:(h=l==null?void 0:l.state)==null?void 0:h.id,path:"createdAt",query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:o,page:C,per_page:B}})):g(K({path:"createdAt",query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:o,page:C,per_page:B},shopId:A})),n(r)):((f=l==null?void 0:l.state)!=null&&f.id?g(Y({filterFormId:(N=l==null?void 0:l.state)==null?void 0:N.id,path:"-createdAt",query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:o,page:C,per_page:B}})):g(K({path:"-createdAt",query:{isRead:a[0]==="read"?!0:a[0]==="unread"?!1:"",formId:o,page:C,per_page:B},shopId:A})),n(r))},rt=s(Xt,{queryValue:p,filters:et,appliedFilters:Pe,onQueryChange:be,onQueryClear:T,onClearAll:le});return s(X,{children:b(Tt,{fullWidth:!0,title:"Submissions",children:[Re.length>0?s(J,{variant:"headingSm",as:"h6",children:s("div",{style:{marginBottom:"6px"},children:(Ee=Re[0])==null?void 0:Ee.label})}):null,b(xt,{children:[s(Ot,{resourceName:Se,items:O.length>0?O:[],renderItem:st,sortValue:t,selectedItems:i,onSelectionChange:Q,promotedBulkActions:ke,loading:!A||ne.loading,onSortChange:r=>n(r),selectable:!0,alternateTool:b(X,{children:[(U==null?void 0:U.subscriptionName)===It.PREMIUM?s(ur,{style:{marginRight:"5px"},data:Fe,filename:ae,children:s(D,{primary:!0,children:"Export All Data"})}):null,s($t,{label:"Sort by",labelInline:!0,options:de,onChange:tt,value:t})]}),filterControl:rt}),j.length<V?s("div",{className:he.ipsPaginationButton,children:s(D,{primary:!0,onClick:me,children:"Load More"})}):null]}),s(Mt,{})]})});function st(r,c){return b(X,{children:[s("div",{className:`${r!=null&&r.isRead?"":he.isReadElement}`,children:s(Dt,{id:c,name:r==null?void 0:r._id,onClick:()=>ge(r),persistActions:!0,children:b("div",{style:{display:"flex",alignItems:"center"},children:[Object.entries(r==null?void 0:r.submission[0]).filter(([h])=>["text","email","name","textarea","phone"].includes(h.split("_").pop())).map(([h,f])=>s("div",{className:he.resourceItem,children:f},h)),s("div",{className:he.dateTimeItem,children:Et(r==null?void 0:r.createdAt).format("YYYY-MM-DD HH:mm:ss")})]})})}),$&&s(Cr,{item:k&&k,open:$,formData:q,handleClose:oe,handleIsReadStatus:fe}),w&&s(fr,{active:w,handleClose:_e,handleDelete:ce,title:"Are you sure to delete selected submission(s)?",description:"This action cannot be undone. No way to revert the deleted data."})]})}function it(r){return Array.isArray(r)?r.length===0:r===""||r==null}}const br=S.memo(yr),Tr=Object.freeze(Object.defineProperty({__proto__:null,default:br},Symbol.toStringTag,{value:"Module"}));export{Tr as i,he as s};
