import{l as la,j as a,M as sa,E as ca,C as ra,m as z,u as ta,n as P,o as ia,a as u,b as N,e as t,P as oa,p as l,q as Y,S as i,B as H,t as f,F as pa,v as da,w as $,x as ha,k as _a,y as ua,z as ga,A as ma,D as fa,G as ba,H as Pa,I as Na,J as q,K as W}from"./index-cdbbdef1.js";import{C as ya}from"./index-8f8c825c.js";/* empty css                              */const Ta=la("pk_live_IGCZ91wblgKajj7dxA8xci0E"),wa=({active:b,priceId:d,toggleModal:y,setShowCardElement:g})=>a(sa,{open:b,onClose:()=>g(!1),title:"Make Payment",large:!0,children:a(ca,{stripe:Ta,children:a(ra,{priceId:d,toggleModal:y,setShowCardElement:g})})}),Ra="/assets/ips_banner_2-7ba41b97.jpg",Ia="/assets/ips_banner_1-e7d496e0.png",Ea="/assets/ips_banner_3-607b5e97.jpg";function Ba(){var G;const b=z.useAppBridge(),d=ta(),y=P.Fullscreen.create(b),g=ia({url:"/api/shop"}),[x,T]=u.useState(!1);u.useState({});const[X,L]=u.useState(!1),c=N(e=>{var s,r;return(r=(s=e.subscription)==null?void 0:s.subscriptionData)==null?void 0:r.data}),A=N(e=>{var s;return(s=e==null?void 0:e.shopId)==null?void 0:s.shopId}),n=N(e=>{var s,r;return(r=(s=e==null?void 0:e.user)==null?void 0:s.userData)==null?void 0:r.user}),J=z.useNavigate(),[Q,Ca]=u.useState(),[k,D]=u.useState(!1),U=e=>{T(!0),L(!0)},Z=N(e=>{var s;return(s=e==null?void 0:e.shopId)==null?void 0:s.appName}),K=u.useCallback(()=>{T(!1)},[]),aa=async e=>{var s,r;if(e===i.FREE){const{id:o,name:w,email:R,domain:na,city:I,country:E,country_code:C,customer_email:S,shop_owner:M,myshopify_domain:m,phone:v}=g;let h={shopId:o,shopName:w,email:R,domain:m,city:I,country:E,countryCode:C,customer_email:S,shop_owner:M,myshopify_domain:m,phone:v};c.filter(({subscriptionName:p,_id:B},_)=>{p===e&&(h={...h,subscriptionName:p,subscriptionId:B})}),d(ua(h)).then(p=>{p!=null&&p.payload&&(d(ga(o)),j(),J("/dashboard",{replace:!0}))})}else if(e===i.PREMIUM){const{id:o,name:w,email:R,domain:na,city:I,country:E,country_code:C,customer_email:S,shop_owner:M,myshopify_domain:m,phone:v}=g.data;let h={shopId:o,shopName:w,email:R,domain:m,city:I,country:E,countryCode:C,customer_email:S,shop_owner:M,myshopify_domain:m,phone:v,subscriptionId:c[0].id,subscriptionName:c[0].subscriptionName};c.filter(({subscriptionName:_,_id:O},F)=>{_===e&&(h={...h,subscriptionName:_,subscriptionId:O})});let p=ma(Z,g.data);const B={priceId:(s=fa)==null?void 0:s.PREMIUM_USD,plan:e,successUrl:(r=p==null?void 0:p.premium_subscription)==null?void 0:r.return_url,user:h};await ba.post("/payment/create-session-checkout",B).then(_=>{var F;P.Redirect.create(b).dispatch(P.Redirect.Action.REMOTE,(F=_==null?void 0:_.data)==null?void 0:F.redirectUrl)})}};u.useEffect(()=>{y.dispatch(P.Fullscreen.Action.EXIT)},[d]);const ea=async()=>{var e;d(Pa({id:(e=n==null?void 0:n.subscription)==null?void 0:e.stripeSubscriptionId,shopId:A})).then(s=>d(Na(A))),T(!1),L(!1)},V=e=>e===!0?a("span",{className:l.planPriceValue,children:a(q,{source:W.tick,color:"primary"})}):e===!1||e===null?a("span",{className:l.planPriceValue,children:a(q,{source:W.cancel,color:"critical"})}):e,j=()=>{D(!1)};return t(oa,{fullWidth:!0,title:"Pricing Plans",children:[k?a(wa,{active:k,priceId:Q,toggleModal:j,setShowCardElement:D}):null,t("div",{style:{display:"flex"},children:[t("div",{className:l.planPageLeft,children:[a(Y,{children:a(Y.Section,{children:a("div",{className:"grid",children:t("div",{className:l.planGridItem,children:[a("div",{className:l.planBoxHeading,children:a("h4",{className:`${l.planBoxHeadingText} ${(n==null?void 0:n.subscriptionName)===i.FREE?l.freePlanHeader:l.premiumPlanHeader}`,children:"Your current plan"})}),t("table",{className:l.planPicingTable,border:1,children:[a("thead",{children:t("tr",{children:[a("th",{scope:"col"}),c==null?void 0:c.map(e=>a("th",{scope:"col",children:a("p",{style:{marginTop:"10px"},children:e==null?void 0:e.subscriptionName.toUpperCase()})}))]})}),t("tbody",{children:[a("th",{scope:"row",className:l.rowTransparent,children:a("div",{className:l.planRowTitle,children:a("span",{className:l.planPriceTitle,children:"Price"})})}),c==null?void 0:c.map(e=>{var s,r;return t("td",{className:l.planPricingRow,children:[t("div",{className:l.planMonthlyPrice,children:[a("span",{className:l.planMonthlyPriceCur,children:e.curruncyType}),a("span",{className:l.planPriceValue,children:a("span",{className:l.planPrice,children:a("span",{children:a("span",{className:l.planRupees,children:e.price})})})}),t("span",{className:l.planMonth,children:["/",a("span",{children:"mo"})]})]}),(e==null?void 0:e.subscriptionName)===i.FREE&&a("div",{className:"d-grid ",style:{visibility:"hidden"},children:a(H,{variant:"secondary",className:`${(n==null?void 0:n.subscriptionName)!==i.FREE?l.planButtonSuccess:""}`,disabled:(n==null?void 0:n.subscriptionName)===i.FREE||n&&(n==null?void 0:n.subscriptionName)===i.PREMIUM||((s=n==null?void 0:n.subscription)==null?void 0:s.cancel_at_period_end),onClick:U,children:a("span",{children:a("span",{children:a("span",{className:l.planButtonFontStyle,children:(n==null?void 0:n.subscriptionName)===i.FREE?f.ACTIVE_PLAN:f.CHOOSE_PLAN})})})})}),(e==null?void 0:e.subscriptionName)===i.PREMIUM&&a(pa,{children:(n==null?void 0:n.subscriptionName)!==i.PREMIUM?a("div",{className:"d-grid gap-2",children:a(H,{variant:"primary",onClick:()=>aa(e==null?void 0:e.subscriptionName,e==null?void 0:e.stripePriceId),disabled:(n==null?void 0:n.subscriptionName)===i.PREMIUM,loading:!n,children:a("span",{children:a("span",{children:a("span",{className:l.planButtonFontStyle,children:(n==null?void 0:n.subscriptionName)===i.PREMIUM?f.CURRENT_PLAN:f.UPGRADE_PLAN})})})})}):a("div",{className:"d-grid gap-2",children:a(H,{variant:"danger",onClick:U,disabled:(r=n==null?void 0:n.subscription)==null?void 0:r.cancel_at_period_end,children:a("span",{children:a("span",{children:a("span",{className:l.planButtonFontStyle,children:f.CANCEL_PLAN})})})})})})]})}),a("tr",{children:a("th",{colSpan:3,className:l.planFeatureTitle,children:a("span",{className:l.planTableHeader,children:a("span",{className:l.planFeatureHeader,children:"Features"})})})}),(c==null?void 0:c.length)>0&&Object.keys((G=c[0])==null?void 0:G.features).map(e=>{var s;return t(da.Fragment,{children:[a("tr",{children:a("th",{colSpan:3,children:a("span",{className:l.planTableHeader,children:a("span",{children:$(e)})})})}),Object.entries((s=c[0])==null?void 0:s.features[e]).map(([r,o])=>t("tr",{children:[a("th",{scope:"row",className:l.planRowData,children:a("div",{className:l.planRowTitle,children:t("dl",{className:l.planLabelName,children:[a("dt",{className:l.planLabelText,children:a("span",{children:$(o==null?void 0:o.label)})}),a("dd",{className:l.planLabelDescription,children:ha(o==null?void 0:o.description)})]})})}),a("td",{children:V(c[0].features[e][r].value)}),a("td",{children:V(c[1].features[e][r].value)})]},r))]},e)})]})]})]})})})}),x&&a(ya,{active:x,isCancelPlan:X,handleClose:K,handleCancelSubscription:ea,title:"Are you sure to cancel the current plan?",description:"<p><strong>Note: </strong> Canceling this subscription plan will result in the following:</p>\r <ul>\r <li>Upon cancellation, you'll retain access to premium features until the end of the current billing cycle.</li>\r <li>You won't be charged for the following month, and after the current period, your subscription will automatically switch to the Free plan.</li>\r <li>While premium features will no longer be available and you can not access forms created under the premium plan.</li>\r </ul>\r <p>Please review our <a href='https://www.contactformtoapi.com/terms-of-service/' target='_blank' >terms and conditions</a> for detailed information.</p>\r <p>If you have any questions, our <a href='https://www.contactformtoapi.com/' target='_blank'>customer support</a> is ready to assist.</p>\r <p>Thank you for being a valued subscriber!</p>"})]}),t("div",{className:l.planPageRight,children:[a("a",{href:"https://www.itpathsolutions.com/contact-us/",target:"_blank",children:a("img",{src:Ra,alt:""})}),a("a",{href:"https://apps.shopify.com/contact-form-to-any-api",target:"_blank",children:a("img",{src:Ia,alt:"",style:{width:"100%",marginTop:"7px"}})}),a("a",{href:"https://www.itpathsolutions.com/contact-us/",target:"_blank",children:a("img",{src:Ea,alt:"",style:{width:"100%",marginTop:"7px"}})})]})]}),a(_a,{})]})}export{Ba as default};
